<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  
  <!-- Security Headers -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdn.jsdelivr.net https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net https://unpkg.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://api.weatherapi.com; frame-src 'self';">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  
  <!-- Primary Meta Tags -->
  <title>Balangkayan Senior High School (BSHS) - Stand Alone | Eastern Samar</title>
  <meta name="description" content="Official website of Balangkayan Senior High School - Stand Alone (BSHS) in Eastern Samar. Offering Academic Track (ABM, HUMSS) and Technical-Vocational Track (EIM, CSS, Home Economics). Enroll now for quality education.">
  <meta name="keywords" content="Balangkayan Senior High School, BSHS, Balangkayan, Eastern Samar, senior high school, SHS, ABM, HUMSS, EIM, CSS, Home Economics, enrollment, education, Philippines, stand alone">
  <meta name="author" content="Balangkayan Senior High School - Stand Alone">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://bshs-es.vercel.app/">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://bshs-es.vercel.app/">
  <meta property="og:title" content="Balangkayan Senior High School (BSHS) - Stand Alone | Eastern Samar">
  <meta property="og:description" content="Official website of Balangkayan Senior High School - Stand Alone. Quality education with Academic and Technical-Vocational tracks. Enroll now!">
  <meta property="og:image" content="https://bshs-es.vercel.app/bshs%20logo.jfif">
  <meta property="og:site_name" content="Balangkayan Senior High School">
  <meta property="og:locale" content="en_PH">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://bshs-es.vercel.app/">
  <meta property="twitter:title" content="Balangkayan Senior High School (BSHS) - Stand Alone">
  <meta property="twitter:description" content="Official website of Balangkayan Senior High School - Stand Alone. Quality education in Eastern Samar.">
  <meta property="twitter:image" content="https://bshs-es.vercel.app/bshs%20logo.jfif">
  
  <!-- Geo Tags -->
  <meta name="geo.region" content="PH-EAS">
  <meta name="geo.placename" content="Balangkayan, Eastern Samar">
  <meta name="geo.position" content="11.477476;125.506518">
  <meta name="ICBM" content="11.477476, 125.506518">
  
  <!-- Favicon -->
  <link rel="icon" type="image/jpeg" href="bshs logo.jfif">
  <link rel="apple-touch-icon" href="bshs logo.jfif">
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" integrity="sha256-6z8xKCGqLjKLqmKLqKqKqKqKqKqKqKqKqKqKqKqKqKs=" crossorigin="anonymous">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com" crossorigin="anonymous"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FCF259',
            secondary: '#B4E50D',
            accent: '#ff7b00',
          },
          animation: {
            'fade-in': 'fadeIn 0.8s ease-in-out',
            'slide-up': 'slideUp 0.6s ease-out',
            'slide-down': 'slideDown 0.6s ease-out',
            'bounce-slow': 'bounce 3s infinite',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { transform: 'translateY(30px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
            slideDown: {
              '0%': { transform: 'translateY(-30px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' },
            },
          }
        }
      }
    }
  </script>
  
  <!-- JSON-LD Structured Data for Google -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EducationalOrganization",
    "name": "Balangkayan Senior High School - Stand Alone",
    "alternateName": "BSHS",
    "url": "https://bshs-es.vercel.app/",
    "logo": "https://bshs-es.vercel.app/bshs%20logo.jfif",
    "description": "Balangkayan Senior High School - Stand Alone (BSHS) is committed to providing quality education that prepares students for college, careers, and life in Eastern Samar, Philippines.",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Balangkayan",
      "addressLocality": "Balangkayan",
      "addressRegion": "Eastern Samar",
      "addressCountry": "PH"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": "11.477476",
      "longitude": "125.506518"
    },
    "telephone": "Contact via website",
    "email": "Contact via website",
    "sameAs": [
      "https://bshs-es.vercel.app/"
    ],
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Academic Programs",
      "itemListElement": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Course",
            "name": "Academic Track - ABM (Accountancy, Business & Management)",
            "description": "Prepare for college with specialized business and management education"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Course",
            "name": "Academic Track - HUMSS (Humanities & Social Sciences)",
            "description": "Prepare for college with humanities and social sciences education"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Course",
            "name": "Technical-Vocational Track - EIM (Electrical Installation & Maintenance)",
            "description": "Gain practical electrical skills and certifications"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Course",
            "name": "Technical-Vocational Track - CSS (Computer Systems Servicing)",
            "description": "Gain practical computer servicing skills and certifications"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Course",
            "name": "Technical-Vocational Track - Home Economics",
            "description": "Gain practical home economics skills and certifications"
          }
        }
      ]
    }
  }
  </script>
  
  <style>
    :root {
      --primary: #FCF259;
      --secondary: #B4E50D;
      --button: #ff7b00;
      --button-hover: #e86a00;
      --accent: #4a90e2;
      --text-dark: #1a1a2e;
      --text-light: #6c757d;
      --background: #ffffff;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      overflow-x: hidden;
      width: 100%;
    }

    body {
      font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--text-dark);
      background: var(--background);
      overflow-x: hidden;
      width: 100%;
      position: relative;
      padding-top: 105px;
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .animate-on-scroll {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .animate-on-scroll.animated {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Animation delay classes */
    .delay-200 {
      animation-delay: 0.2s;
    }
    
    .delay-300 {
      animation-delay: 0.3s;
    }
    
    .delay-400 {
      animation-delay: 0.4s;
    }
    
    /* Utility classes */
    .hidden-element {
      display: none !important;
    }

    /* Emergency Alert Banner */
    .emergency-alert-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      width: 100%;
      z-index: 10000;
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      color: white;
      padding: 15px 20px;
      text-align: center;
      font-weight: 600;
      font-size: 1.1em;
      box-shadow: 0 4px 20px rgba(220, 38, 38, 0.5);
      animation: slide-down-banner 0.5s ease-out, pulse-banner 2s ease-in-out infinite;
      display: none;
      border-bottom: 3px solid rgba(255, 255, 255, 0.3);
    }

    .emergency-alert-banner.active {
      display: block;
    }

    .emergency-alert-banner.orange {
      background: linear-gradient(135deg, #f97316, #ea580c);
      box-shadow: 0 4px 20px rgba(249, 115, 22, 0.5);
    }

    .emergency-alert-banner .banner-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .emergency-alert-banner .banner-icon {
      font-size: 1.5em;
      animation: shake-icon 0.5s ease-in-out infinite;
    }

    .emergency-alert-banner .banner-close {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2em;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .emergency-alert-banner .banner-close:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-50%) scale(1.1);
    }

    @keyframes slide-down-banner {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes pulse-banner {
      0%, 100% {
        box-shadow: 0 4px 20px rgba(220, 38, 38, 0.5);
      }
      50% {
        box-shadow: 0 4px 30px rgba(220, 38, 38, 0.8);
      }
    }

    @keyframes shake-icon {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-10deg); }
      75% { transform: rotate(10deg); }
    }

    /* Adjust header when banner is active */
    body.banner-active header {
      top: 70px;
    }

    body.banner-active .hero {
      margin-top: 70px;
    }

    /* Header */
    header {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      padding: 20px 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      width: 100%;
      z-index: 1000;
      box-shadow: 0 2px 30px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
    }
    
    header.scrolled {
      padding: 15px 60px;
      box-shadow: 0 4px 40px rgba(0,0,0,0.12);
      background: rgba(255, 255, 255, 0.95);
    }
    
    header.scrolled .logo img {
      width: 50px;
      height: 50px;
    }
    
    /* Hamburger Menu Button */
    .hamburger {
      display: none;
      flex-direction: column;
      justify-content: space-around;
      width: 30px;
      height: 24px;
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0;
      z-index: 1001;
      position: relative;
    }
    
    .hamburger span {
      width: 30px;
      height: 3px;
      background: var(--text-dark);
      border-radius: 10px;
      transition: all 0.3s ease;
      transform-origin: center;
    }
    
    .hamburger.active span:nth-child(1) {
      transform: translateY(10.5px) rotate(45deg);
    }
    
    .hamburger.active span:nth-child(2) {
      opacity: 0;
      transform: translateX(-20px);
    }
    
    .hamburger.active span:nth-child(3) {
      transform: translateY(-10.5px) rotate(-45deg);
    }
    
    body.dark-mode .hamburger span {
      background: #e0e0e0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 18px;
      transition: all 0.3s ease;
    }

    .logo:hover {
      transform: scale(1.02);
    }

    .logo img {
      width: 65px;
      height: 65px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid var(--primary);
      box-shadow: 0 4px 20px rgba(252, 242, 89, 0.5), 0 0 0 0 rgba(252, 242, 89, 0.4);
      transition: all 0.4s ease;
      animation: logo-pulse 3s ease-in-out infinite;
    }
    
    @keyframes logo-pulse {
      0%, 100% {
        box-shadow: 0 4px 20px rgba(252, 242, 89, 0.5), 0 0 0 0 rgba(252, 242, 89, 0.4);
      }
      50% {
        box-shadow: 0 6px 30px rgba(252, 242, 89, 0.6), 0 0 0 8px rgba(252, 242, 89, 0.1);
      }
    }

    .logo:hover img {
      box-shadow: 0 8px 35px rgba(252, 242, 89, 0.7);
      transform: rotate(5deg) scale(1.05);
    }

    .logo-text {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5em;
      font-weight: 800;
      color: var(--text-dark);
      letter-spacing: -0.5px;
      line-height: 1.3;
      background: linear-gradient(135deg, var(--text-dark), #2d3748);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    
    .logo-text::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--primary), var(--button));
      transition: width 0.4s ease;
      border-radius: 2px;
    }
    
    .logo:hover .logo-text::after {
      width: 100%;
    }
    
    body.dark-mode .logo-text {
      background: linear-gradient(135deg, #e0e0e0, #ffffff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    nav ul {
      display: flex;
      gap: 45px;
      list-style: none;
      align-items: center;
    }

    nav a {
      font-weight: 600;
      color: var(--text-dark);
      padding: 12px 0;
      transition: all 0.3s ease;
      text-decoration: none;
      position: relative;
      font-size: 1.15em;
      letter-spacing: 0.3px;
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--button), var(--primary));
      transition: width 0.3s ease;
      border-radius: 2px;
    }

    nav a:hover::after {
      width: 100%;
    }

    nav a:hover {
      color: var(--button);
      transform: translateY(-2px);
    }
    
    nav a:active {
      transform: translateY(0);
    }

    /* Theme Toggle Button */
    .theme-toggle {
      background: linear-gradient(135deg, #ffd700, #ff8c00);
      border: none;
      width: 55px;
      height: 55px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6em;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
      position: relative;
      overflow: hidden;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .theme-toggle::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.4), transparent);
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .theme-toggle:hover::before {
      width: 120%;
      height: 120%;
    }

    .theme-toggle:hover {
      transform: scale(1.15) rotate(180deg);
      box-shadow: 0 8px 30px rgba(255, 215, 0, 0.6);
    }

    .theme-toggle:active {
      transform: scale(0.95);
    }

    .theme-icon {
      position: relative;
      z-index: 1;
      transition: transform 0.4s ease;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-3px); }
    }
    
    body.dark-mode .theme-toggle {
      background: linear-gradient(135deg, #1e3a8a, #3b82f6);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
    }
    
    body.dark-mode .theme-toggle:hover {
      box-shadow: 0 8px 30px rgba(59, 130, 246, 0.6);
    }
    
    /* Weather Toggle Button */
    .weather-toggle {
      background: linear-gradient(135deg, #60a5fa, #3b82f6, #2563eb);
      border: none;
      width: 55px;
      height: 55px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6em;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
      position: relative;
      overflow: hidden;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    .weather-toggle::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.4), transparent);
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }
    
    .weather-toggle:hover::before {
      width: 120%;
      height: 120%;
    }
    
    .weather-toggle:hover {
      transform: scale(1.15) rotate(-10deg);
      box-shadow: 0 8px 30px rgba(59, 130, 246, 0.6);
    }
    
    .weather-toggle:active {
      transform: scale(0.95);
    }
    
    .weather-toggle.warning {
      background: linear-gradient(135deg, #f59e0b, #f97316, #dc2626);
      animation: pulse-warning 2s ease-in-out infinite;
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    @keyframes pulse-warning {
      0%, 100% {
        box-shadow: 0 4px 20px rgba(239, 68, 68, 0.5);
        transform: scale(1);
      }
      50% {
        box-shadow: 0 8px 35px rgba(239, 68, 68, 0.8), 0 0 20px rgba(239, 68, 68, 0.4);
        transform: scale(1.08);
      }
    }
    
    .weather-icon {
      position: relative;
      z-index: 1;
      transition: transform 0.4s ease;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      animation: bounce-subtle 2s ease-in-out infinite;
    }
    
    @keyframes bounce-subtle {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-4px) rotate(5deg); }
    }
    
    body.dark-mode .weather-toggle {
      background: linear-gradient(135deg, #3b82f6, #2563eb, #1e40af);
      box-shadow: 0 4px 15px rgba(37, 99, 235, 0.5);
    }
    
    body.dark-mode .weather-toggle:hover {
      box-shadow: 0 8px 30px rgba(37, 99, 235, 0.7);
    }
    
    /* Weather Alert Modal */
    .weather-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      z-index: 2000;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease;
    }
    
    .weather-modal.active {
      display: flex;
    }
    
    .weather-modal-content {
      background: white;
      border-radius: 25px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
      animation: slideUp 0.4s ease;
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .weather-modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.1);
      border: none;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.5em;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .weather-modal-close:hover {
      background: rgba(0, 0, 0, 0.2);
      transform: rotate(90deg);
    }
    
    .weather-modal-header {
      text-align: center;
      margin-bottom: 25px;
    }
    
    .weather-modal-icon {
      font-size: 4em;
      margin-bottom: 15px;
    }
    
    .weather-modal-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.8em;
      font-weight: 800;
      color: var(--text-dark);
      margin-bottom: 10px;
    }
    
    .weather-status {
      display: inline-block;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.9em;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 20px;
    }
    
    .weather-status.normal {
      background: linear-gradient(135deg, #4caf50, #45a049);
      color: white;
    }
    
    .weather-status.yellow {
      background: linear-gradient(135deg, #ffd700, #ffa500);
      color: #333;
    }
    
    .weather-status.orange {
      background: linear-gradient(135deg, #ff9800, #ff5722);
      color: white;
    }
    
    .weather-status.red {
      background: linear-gradient(135deg, #f44336, #d32f2f);
      color: white;
      animation: pulse-warning 2s ease-in-out infinite;
    }
    
    .weather-info {
      background: rgba(74, 144, 226, 0.1);
      border-left: 4px solid #4a90e2;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
    }
    
    .weather-info p {
      margin: 10px 0;
      color: var(--text-light);
      line-height: 1.6;
    }
    
    .weather-info strong {
      color: var(--text-dark);
      font-weight: 700;
    }
    
    .suspension-notice {
      background: linear-gradient(135deg, rgba(255, 87, 34, 0.1), rgba(244, 67, 54, 0.1));
      border: 2px solid #ff5722;
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
    }
    
    .suspension-notice h4 {
      color: #d32f2f;
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.2em;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .suspension-notice p {
      color: var(--text-dark);
      line-height: 1.6;
      margin: 8px 0;
    }
    
    .weather-update-time {
      text-align: center;
      color: var(--text-light);
      font-size: 0.85em;
      margin-top: 20px;
      font-style: italic;
    }

    /* Dark Mode Styles */
    body.dark-mode {
      background: #1a1a2e;
      color: #e0e0e0;
    }

    body.dark-mode header {
      background: rgba(26, 26, 46, 0.98);
      border-bottom: 1px solid rgba(252, 242, 89, 0.3);
    }
    
    body.dark-mode header.scrolled {
      background: rgba(26, 26, 46, 0.95);
      box-shadow: 0 4px 40px rgba(0,0,0,0.3);
    }

    body.dark-mode .logo-text,
    body.dark-mode nav a {
      color: #e0e0e0;
    }

    body.dark-mode nav a:hover {
      color: var(--primary);
    }
    
    @media (max-width: 768px) {
      body.dark-mode nav {
        background: rgba(26, 26, 46, 0.98);
      }
    }
    
    body.dark-mode .weather-modal-content {
      background: #2d2d44;
    }
    
    body.dark-mode .weather-modal-title {
      color: #e0e0e0;
    }
    
    body.dark-mode .weather-info {
      background: rgba(74, 144, 226, 0.15);
      border-left-color: #4a90e2;
    }
    
    body.dark-mode .weather-info p {
      color: #b0b0b0;
    }
    
    body.dark-mode .weather-info strong {
      color: #e0e0e0;
    }
    
    body.dark-mode .suspension-notice {
      background: linear-gradient(135deg, rgba(255, 87, 34, 0.2), rgba(244, 67, 54, 0.2));
    }
    
    body.dark-mode .suspension-notice p {
      color: #e0e0e0;
    }

    body.dark-mode .hero {
      background: linear-gradient(135deg, #2d2d44 0%, #1a1a2e 50%, #16213e 100%);
    }

    body.dark-mode .hero::before {
      opacity: 0.3;
    }

    body.dark-mode .hero h1,
    body.dark-mode .hero-visual-card h3 {
      color: #e0e0e0;
    }

    body.dark-mode .hero p,
    body.dark-mode .hero-visual-card p {
      color: #b0b0b0;
    }

    body.dark-mode section {
      background: #1a1a2e;
    }

    body.dark-mode section h2 {
      color: #e0e0e0;
    }

    body.dark-mode section > p {
      color: #b0b0b0;
    }

    body.dark-mode .program-card,
    body.dark-mode .testimonial,
    body.dark-mode .hero-visual-card,
    body.dark-mode .map-widget {
      background: #2d2d44;
      border-color: rgba(252, 242, 89, 0.2);
    }

    body.dark-mode .program-card .title,
    body.dark-mode .testimonial .author,
    body.dark-mode .map-widget h3 {
      color: #e0e0e0;
    }

    body.dark-mode .program-card .description,
    body.dark-mode .testimonial p,
    body.dark-mode .map-widget p,
    body.dark-mode .map-info-item span {
      color: #b0b0b0;
    }

    body.dark-mode .chatbot-window {
      background: #2d2d44;
    }

    body.dark-mode .chatbot-messages {
      background: #1a1a2e;
    }

    body.dark-mode .message .bubble {
      background: #3d3d5c;
      color: #e0e0e0;
    }

    body.dark-mode .chatbot-input {
      background: #1a1a2e;
      border-color: #3d3d5c;
      color: #e0e0e0;
    }

    body.dark-mode .chatbot-input::placeholder {
      color: #6c6c8c;
    }

    body.dark-mode .map-info-item {
      background: rgba(255, 123, 0, 0.1);
    }

    body.dark-mode .map-info-item strong {
      color: #e0e0e0;
    }

    body.dark-mode .announcements-section {
      background: linear-gradient(135deg, #1a1a2e 0%, #0f3460 50%, #1a1a2e 100%);
    }
    
    body.dark-mode .event-card {
      background: #2d2d44;
      border-color: rgba(74, 144, 226, 0.3);
    }
    
    body.dark-mode .event-header {
      border-bottom-color: rgba(74, 144, 226, 0.2);
    }
    
    body.dark-mode .event-header-text h3 {
      color: #e0e0e0;
    }
    
    body.dark-mode .event-content {
      color: #b0b0b0;
    }
    
    body.dark-mode .event-detail-item {
      background: rgba(74, 144, 226, 0.12);
      border-left-color: #4a90e2;
      color: #e0e0e0;
    }
    
    body.dark-mode .event-detail-item strong {
      color: #4a90e2;
    }
    
    body.dark-mode .empty-events {
      background: #2d2d44;
      border-color: rgba(74, 144, 226, 0.3);
    }
    
    body.dark-mode .empty-events h3 {
      color: #e0e0e0;
    }
    
    body.dark-mode .empty-events p {
      color: #b0b0b0;
    }
    
    body.dark-mode .daily-reminders-section {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #1a1a2e 100%);
    }
    
    body.dark-mode .reminder-card {
      background: #2d2d44;
      border-color: rgba(255, 123, 0, 0.3);
    }
    
    body.dark-mode .reminder-header {
      border-bottom-color: rgba(255, 123, 0, 0.2);
    }
    
    body.dark-mode .reminder-header-text h3 {
      color: #e0e0e0;
    }
    
    body.dark-mode .reminder-content {
      color: #b0b0b0;
    }
    
    body.dark-mode .reminder-detail-item {
      background: rgba(255, 123, 0, 0.12);
      border-left-color: var(--button);
      color: #e0e0e0;
    }
    
    body.dark-mode .reminder-detail-item strong {
      color: var(--button);
    }
    
    /* Patchy Rain Effect - Subtle Raindrops */
    .patchy-rain-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      overflow: hidden;
    }
    
    .raindrop {
      position: absolute;
      width: 2px;
      height: 15px;
      background: linear-gradient(to bottom, rgba(174, 194, 224, 0.1), rgba(174, 194, 224, 0.5));
      border-radius: 50%;
      animation: fall linear infinite;
      opacity: 0.4;
    }
    
    @keyframes fall {
      0% {
        transform: translateY(-100px);
        opacity: 0;
      }
      10% {
        opacity: 0.4;
      }
      90% {
        opacity: 0.4;
      }
      100% {
        transform: translateY(100vh);
        opacity: 0;
      }
    }
    
    body.dark-mode .raindrop {
      background: linear-gradient(to bottom, rgba(174, 194, 224, 0.15), rgba(174, 194, 224, 0.6));
    }

    body.dark-mode #pledge {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%) !important;
    }

    body.dark-mode #pledge > div > div {
      background: #2d2d44 !important;
      border-left-color: var(--primary) !important;
    }

    body.dark-mode #pledge p {
      color: #b0b0b0 !important;
    }

    body.dark-mode #pledge p[style*="font-weight: 600"] {
      color: #e0e0e0 !important;
    }

    body.dark-mode #pledge li {
      color: #b0b0b0 !important;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, #FCF259 0%, #ffd93d 50%, #ff7b00 100%);
      min-height: 90vh;
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      align-items: center;
      gap: 80px;
      padding: 100px 60px;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('bshs.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      opacity: 0.55;
      z-index: 0;
    }

    .hero-content {
      position: relative;
      z-index: 1;
      animation: slideInLeft 1s ease;
    }

    .hero h1 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 5em;
      font-weight: 900;
      color: var(--text-dark);
      margin-bottom: 30px;
      line-height: 1.1;
      letter-spacing: -2px;
    }

    .hero h1 .highlight {
      background: linear-gradient(135deg, #ff7b00, #ff5722);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      font-size: 1.3em;
      color: rgba(26, 26, 46, 0.85);
      margin-bottom: 45px;
      line-height: 1.8;
      max-width: 600px;
    }

    .hero-visual {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: slideInRight 1.2s ease;
    }

    .hero-visual-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: none;
      padding: 60px 50px;
      border-radius: 35px;
      box-shadow: 0 25px 70px rgba(0, 0, 0, 0.2);
      text-align: center;
      border: 3px solid rgba(255, 255, 255, 0.3);
      transform: rotate(-3deg);
      transition: transform 0.4s ease;
    }

    .hero-visual-card:hover {
      transform: rotate(0deg) scale(1.05);
    }

    .hero-visual-card .icon {
      font-size: 6em;
      margin-bottom: 25px;
      display: block;
      filter: drop-shadow(0 8px 15px rgba(0, 0, 0, 0.15));
    }

    .hero-visual-card h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2em;
      color: var(--text-dark);
      margin-bottom: 15px;
      font-weight: 800;
    }

    .hero-visual-card p {
      color: var(--text-dark);
      font-size: 1.15em;
      margin: 0;
      font-weight: 600;
      text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
    }

    /* Button */
    .btn {
      background: linear-gradient(135deg, #ff7b00, #ff5722);
      color: #fff;
      padding: 20px 50px;
      border-radius: 50px;
      font-size: 1.2em;
      font-weight: 700;
      cursor: pointer;
      border: none;
      box-shadow: 0 10px 30px rgba(255, 123, 0, 0.4);
      transition: all 0.4s ease;
      display: inline-flex;
      align-items: center;
      gap: 12px;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn:hover::before {
      width: 400px;
      height: 400px;
    }

    .btn:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 15px 40px rgba(255, 123, 0, 0.6);
    }

    .btn span {
      position: relative;
      z-index: 1;
    }

    /* Sections */
    section {
      padding: 120px 60px;
    }

    section h2 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 3.5em;
      font-weight: 900;
      text-align: center;
      margin-bottom: 25px;
      color: var(--text-dark);
      letter-spacing: -2px;
    }

    section h2::after {
      content: '';
      display: block;
      width: 100px;
      height: 6px;
      background: linear-gradient(90deg, var(--button), var(--primary));
      margin: 25px auto 0;
      border-radius: 10px;
    }

    section > p {
      text-align: center;
      font-size: 1.25em;
      color: var(--text-light);
      max-width: 800px;
      margin: 0 auto 70px;
      line-height: 1.9;
    }

    /* Programs Grid */
    .programs-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 50px;
      max-width: 1100px;
      margin: 0 auto;
    }

    .program-card {
      background: linear-gradient(145deg, #ffffff, #f8f9fa);
      padding: 50px 40px;
      border-radius: 30px;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.08);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      text-align: center;
      position: relative;
      overflow: hidden;
      border: 2px solid transparent;
      cursor: pointer;
      min-height: 350px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .program-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 6px;
      background: linear-gradient(90deg, var(--button), var(--primary));
      transform: scaleX(0);
      transition: transform 0.5s ease;
    }

    .program-card:hover::before {
      transform: scaleX(1);
    }

    .program-card:hover {
      transform: translateY(-20px) scale(1.03);
      box-shadow: 0 25px 70px rgba(0, 0, 0, 0.15);
      border-color: rgba(252, 242, 89, 0.5);
    }

    .program-card.flipped {
      background: linear-gradient(145deg, #fff5e6, #ffe6cc);
      border-color: var(--button);
    }

    .program-card .icon {
      font-size: 4em;
      margin-bottom: 30px;
      display: block;
      filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.1));
      transition: transform 0.4s ease, opacity 0.3s ease;
    }

    .program-card:hover .icon {
      transform: scale(1.15) rotate(8deg);
    }

    .program-card.flipped .icon {
      opacity: 0;
      transform: scale(0);
    }

    .program-card .title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.6em;
      font-weight: 800;
      color: var(--text-dark);
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }

    .program-card.flipped .title {
      font-size: 1.8em;
      color: var(--button);
      margin-bottom: 30px;
    }

    .program-card .description {
      color: var(--text-light);
      line-height: 1.9;
      font-size: 1.05em;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .program-card.flipped .description {
      opacity: 0;
      transform: translateY(-20px);
      position: absolute;
    }

    .program-card-front,
    .program-card-back {
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .program-card-front {
      opacity: 1;
      transform: rotateY(0deg);
    }

    .program-card.flipped .program-card-front {
      opacity: 0;
      transform: rotateY(180deg);
      position: absolute;
    }

    .program-card-back {
      opacity: 0;
      transform: rotateY(-180deg);
      position: absolute;
      width: 100%;
    }

    .program-card.flipped .program-card-back {
      opacity: 1;
      transform: rotateY(0deg);
      position: relative;
    }

    .strands-list {
      list-style: none;
      padding: 0;
      margin: 20px 0;
      text-align: left;
    }

    .strands-list li {
      background: linear-gradient(135deg, #ff7b00, #ff5722);
      color: #fff;
      padding: 18px 25px;
      margin-bottom: 15px;
      border-radius: 15px;
      font-size: 1.1em;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(255, 123, 0, 0.3);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
      animation: slideInStrand 0.5s ease forwards;
      opacity: 0;
    }

    .strands-list li:nth-child(1) {
      animation-delay: 0.1s;
    }

    .strands-list li:nth-child(2) {
      animation-delay: 0.2s;
    }

    .strands-list li:nth-child(3) {
      animation-delay: 0.3s;
    }

    @keyframes slideInStrand {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .strands-list li:hover {
      transform: translateX(10px);
      box-shadow: 0 6px 20px rgba(255, 123, 0, 0.5);
    }

    .strands-list li::before {
      content: 'âœ“';
      background: rgba(255, 255, 255, 0.3);
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
    }

    .back-button {
      background: linear-gradient(135deg, #95a5a6, #7f8c8d);
      color: #fff;
      border: none;
      padding: 12px 30px;
      border-radius: 25px;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(149, 165, 166, 0.3);
    }

    .back-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(149, 165, 166, 0.5);
      background: linear-gradient(135deg, #7f8c8d, #6c7a7b);
    }

    /* Testimonials */
    .testimonials-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 45px;
      max-width: 1300px;
      margin: 0 auto;
    }

    .testimonial {
      background: linear-gradient(145deg, #ffffff, #fafbfc);
      padding: 45px 40px;
      border-radius: 25px;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.08);
      border-left: 6px solid var(--primary);
      position: relative;
      transition: all 0.4s ease;
    }

    .testimonial:hover {
      transform: translateY(-10px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
      border-left-color: var(--button);
    }

    .testimonial::before {
      content: '\201C';
      font-size: 6em;
      color: var(--primary);
      position: absolute;
      top: 20px;
      left: 30px;
      opacity: 0.15;
      font-family: Georgia, serif;
    }

    .testimonial p {
      font-style: italic;
      color: var(--text-light);
      margin-bottom: 30px;
      line-height: 2;
      position: relative;
      z-index: 1;
      font-size: 1.1em;
    }

    .testimonial .author {
      font-weight: 700;
      color: var(--text-dark);
      text-align: right;
      font-style: normal;
      font-size: 1.15em;
    }

    /* Footer */
    footer {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #fff;
      text-align: center;
      padding: 70px 20px 40px;
      position: relative;
      overflow: hidden;
    }

    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--button), var(--primary));
    }

    footer p {
      margin-bottom: 30px;
      font-size: 1.1em;
      color: rgba(255, 255, 255, 0.9);
    }

    .social-icons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .social-icons a {
      width: 55px;
      height: 55px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5em;
      transition: all 0.4s ease;
      border: 2px solid rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    .social-icons a::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: var(--accent);
      transform: translate(-50%, -50%);
      transition: width 0.4s, height 0.4s;
      z-index: 0;
    }

    .social-icons a:hover::before {
      width: 100%;
      height: 100%;
    }

    .social-icons a:hover {
      border-color: var(--accent);
      transform: translateY(-10px) scale(1.15);
      box-shadow: 0 12px 35px rgba(74, 144, 226, 0.6);
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .hero {
        grid-template-columns: 1fr;
        gap: 60px;
        padding: 80px 40px;
      }
      
      .hero h1 {
        font-size: 4em;
      }
      
      .programs-grid {
        gap: 40px;
      }
    }

    @media (max-width: 768px) {
      body {
        padding-top: 80px;
      }
      
      header {
        padding: 18px 20px;
      }
      
      header.scrolled {
        padding: 14px 20px;
      }
      
      header.scrolled .logo img {
        width: 50px;
        height: 50px;
      }
      
      .logo {
        gap: 12px;
        flex: 1;
      }
      
      .logo img {
        width: 55px;
        height: 55px;
      }
      
      .logo-text {
        font-size: 1.15em;
        max-width: 220px;
        line-height: 1.3;
        font-weight: 800;
      }
      
      .hamburger {
        display: flex;
        flex-shrink: 0;
      }
      
      nav {
        position: fixed;
        top: 0;
        right: -100%;
        width: 300px;
        height: 100vh;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        padding: 100px 40px 40px 40px;
        transition: right 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        z-index: 1000;
        box-shadow: -5px 0 30px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
      }
      
      nav.active {
        right: 0;
      }
      
      nav ul {
        flex-direction: column;
        gap: 0;
        align-items: flex-start;
      }
      
      nav ul li {
        width: 100%;
        opacity: 0;
        transform: translateX(20px);
        animation: slideInNav 0.4s ease forwards;
      }
      
      nav.active ul li {
        opacity: 1;
        transform: translateX(0);
      }
      
      nav.active ul li:nth-child(1) { animation-delay: 0.1s; }
      nav.active ul li:nth-child(2) { animation-delay: 0.15s; }
      nav.active ul li:nth-child(3) { animation-delay: 0.2s; }
      nav.active ul li:nth-child(4) { animation-delay: 0.25s; }
      nav.active ul li:nth-child(5) { animation-delay: 0.3s; }
      nav.active ul li:nth-child(6) { animation-delay: 0.35s; }
      
      @keyframes slideInNav {
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      
      nav a {
        font-size: 1.2em;
        padding: 18px 0;
        display: block;
        width: 100%;
        font-weight: 600;
      }
      
      .theme-toggle,
      .weather-toggle {
        width: 100%;
        height: 55px;
        border-radius: 12px;
        justify-content: flex-start;
        padding-left: 0;
        font-size: 1.3em;
        margin-top: 10px;
      }
      
      .hero {
        padding: 60px 25px 50px 25px;
        min-height: auto;
      }
      
      .hero h1 {
        font-size: 2.8em;
        line-height: 1.2;
        margin-bottom: 20px;
      }
      
      .hero p {
        font-size: 1.1em;
        line-height: 1.7;
        margin-bottom: 25px;
      }
      
      .hero-visual-card {
        padding: 45px 30px;
        margin-top: 35px;
      }
      
      .hero-visual-card h3 {
        font-size: 2em;
      }
      
      section {
        padding: 60px 25px;
      }
      
      section h2 {
        font-size: 2.2em;
        margin-bottom: 20px;
      }
      
      section > p {
        font-size: 1.05em;
        line-height: 1.7;
      }
      
      .programs-grid {
        grid-template-columns: 1fr;
        gap: 30px;
      }
      
      .program-card {
        padding: 35px 25px;
      }
      
      .program-card h3 {
        font-size: 1.5em;
      }
      
      .testimonials-container {
        grid-template-columns: 1fr;
        gap: 25px;
      }
      
      .testimonial-card {
        padding: 30px 25px;
      }
      
      .weather-modal-content {
        width: 95%;
        padding: 30px 20px;
        max-height: 85vh;
      }
      
      .weather-modal-title {
        font-size: 1.5em;
      }
      
      .weather-modal-icon {
        font-size: 3em;
      }
      
      footer {
        padding: 40px 20px 30px 20px;
      }
      
      .footer-content {
        grid-template-columns: 1fr;
        gap: 30px;
        text-align: center;
      }
      
      .footer-section h3 {
        font-size: 1.3em;
      }
    }

    @media (max-width: 480px) {
      body {
        padding-top: 75px;
      }
      
      header {
        padding: 15px 18px;
      }
      
      .logo-text {
        font-size: 1em;
        max-width: 170px;
        font-weight: 800;
      }
      
      .logo img {
        width: 50px;
        height: 50px;
      }
      
      header.scrolled .logo img {
        width: 45px;
        height: 45px;
      }
      
      nav ul {
        gap: 10px;
      }
      
      nav a {
        font-size: 1.15em;
      }
      
      .theme-toggle,
      .weather-toggle {
        width: 50px;
        height: 50px;
        font-size: 1.4em;
      }
      
      .hero {
        padding: 50px 20px 40px 20px;
      }
      
      .hero h1 {
        font-size: 2.3em;
        margin-bottom: 18px;
      }
      
      .hero p {
        font-size: 1.05em;
        line-height: 1.6;
      }
      
      .hero-visual-card {
        padding: 40px 25px;
      }
      
      .hero-visual-card h3 {
        font-size: 1.7em;
      }
      
      .btn {
        padding: 15px 32px;
        font-size: 1.05em;
      }
      
      section {
        padding: 50px 20px;
      }
      
      section h2 {
        font-size: 2em;
        margin-bottom: 18px;
      }
      
      section > p {
        font-size: 1.02em;
        line-height: 1.6;
      }
    }

    /* AI Chatbot Styles */
    .chatbot-container {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 9999;
    }

    .chatbot-button {
      width: 65px;
      height: 65px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff7b00, #ff5722);
      border: none;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(255, 123, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      animation: chatbotPulse 2s ease-in-out infinite, chatbotBounce 3s ease-in-out infinite;
    }

    .chatbot-button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.4s, height 0.4s;
    }

    .chatbot-button:hover::before {
      width: 100%;
      height: 100%;
    }

    .chatbot-button:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(255, 123, 0, 0.7);
      animation: none;
    }

    .chatbot-button.active {
      background: linear-gradient(135deg, #e86a00, #e04e1a);
      animation: none;
    }

    .chatbot-window {
      position: absolute;
      bottom: 85px;
      right: 0;
      width: 380px;
      height: 550px;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 15px 60px rgba(0, 0, 0, 0.25);
      display: none;
      flex-direction: column;
      overflow: hidden;
      animation: slideUp 0.3s ease;
    }

    .chatbot-window.active {
      display: flex;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes chatbotPulse {
      0%, 100% {
        box-shadow: 0 8px 25px rgba(255, 123, 0, 0.5);
      }
      50% {
        box-shadow: 0 8px 25px rgba(255, 123, 0, 0.5), 0 0 0 15px rgba(255, 123, 0, 0.2), 0 0 0 30px rgba(255, 123, 0, 0.1);
      }
    }

    @keyframes chatbotBounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateY(0) scale(1);
      }
      40% {
        transform: translateY(-15px) scale(1.05);
      }
      60% {
        transform: translateY(-8px) scale(1.02);
      }
    }

    .chatbot-header {
      background: linear-gradient(135deg, #ff7b00, #ff5722);
      color: #fff;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .chatbot-header .avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5em;
    }

    .chatbot-header .info h3 {
      margin: 0;
      font-size: 1.1em;
      font-weight: 700;
    }

    .chatbot-header .info p {
      margin: 0;
      font-size: 0.85em;
      opacity: 0.9;
    }

    .chatbot-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background: #f8f9fa;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .chatbot-messages::-webkit-scrollbar {
      width: 6px;
    }

    .chatbot-messages::-webkit-scrollbar-track {
      background: #e9ecef;
    }

    .chatbot-messages::-webkit-scrollbar-thumb {
      background: #ff7b00;
      border-radius: 10px;
    }

    .message {
      display: flex;
      animation: fadeInUp 0.8s ease-out;
    }

    .message .avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff7b00, #ff5722);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2em;
      flex-shrink: 0;
    }

    .message.user .avatar {
      background: linear-gradient(135deg, #4a90e2, #357abd);
    }

    .message .bubble {
      max-width: 70%;
      padding: 12px 16px;
      border-radius: 18px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      font-size: 0.95em;
      line-height: 1.5;
      word-wrap: break-word;
    }

    .message.user .bubble {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: #fff;
    }

    .chatbot-input-area {
      padding: 15px;
      background: #fff;
      border-top: 1px solid #e9ecef;
      display: flex;
      gap: 10px;
    }

    .chatbot-input {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e9ecef;
      border-radius: 25px;
      font-size: 0.95em;
      font-family: 'Poppins', sans-serif;
      outline: none;
      transition: border-color 0.3s ease;
    }

    .chatbot-input:focus {
      border-color: #ff7b00;
    }

    .chatbot-send {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ff7b00, #ff5722);
      border: none;
      color: #fff;
      font-size: 1.2em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .chatbot-send:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 15px rgba(255, 123, 0, 0.5);
    }

    .chatbot-send:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .quick-replies {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .quick-reply {
      padding: 8px 16px;
      background: #fff;
      border: 2px solid #ff7b00;
      border-radius: 20px;
      font-size: 0.85em;
      color: #ff7b00;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quick-reply:hover {
      background: #ff7b00;
      color: #fff;
      transform: translateY(-2px);
    }

    .typing-indicator {
      display: flex;
      gap: 5px;
      padding: 12px 16px;
      background: #fff;
      border-radius: 18px;
      width: fit-content;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ff7b00;
      animation: typing 1.4s infinite;
    }

    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.5;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }

    @media (max-width: 768px) {
      .chatbot-container {
        position: fixed !important;
        bottom: 20px !important;
        right: 20px !important;
        z-index: 9999 !important;
      }
      
      .chatbot-window {
        position: fixed;
        width: calc(100vw - 40px);
        height: 70vh;
        max-height: 600px;
        bottom: 90px;
        right: 20px;
        left: auto;
        transform: none;
      }
      
      .chatbot-button {
        width: 60px;
        height: 60px;
      }
      
      .chatbot-header {
        padding: 15px;
      }
      
      .chatbot-messages {
        padding: 15px;
      }
      
      .message .bubble {
        max-width: 85%;
      }
    }
    
    @media (max-width: 480px) {
      .chatbot-container {
        position: fixed !important;
        bottom: 15px !important;
        right: 15px !important;
        z-index: 9999 !important;
      }
      
      .chatbot-window {
        position: fixed;
        width: calc(100vw - 30px);
        height: 65vh;
        max-height: 500px;
        bottom: 80px;
        right: 15px;
        left: auto;
      }
      
      .chatbot-button {
        width: 55px;
        height: 55px;
        font-size: 1.8em;
      }
      
      .chatbot-header .avatar {
        width: 40px;
        height: 40px;
      }
      
      .chatbot-header .info h3 {
        font-size: 1em;
      }
      
      .chatbot-header .info p {
        font-size: 0.8em;
      }
    }

    /* Map Widget Styles */
    .map-widget {
      background: linear-gradient(145deg, #ffffff, #f8f9fa);
      padding: 50px 40px;
      border-radius: 30px;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.08);
      max-width: 1100px;
      margin: 0 auto;
      border: 2px solid rgba(252, 242, 89, 0.3);
    }

    .map-widget h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2em;
      font-weight: 800;
      color: var(--text-dark);
      margin-bottom: 15px;
      text-align: center;
    }

    .map-widget p {
      text-align: center;
      color: var(--text-light);
      margin-bottom: 30px;
      font-size: 1.1em;
    }

    #schoolMap {
      height: 450px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      border: 3px solid rgba(255, 123, 0, 0.2);
      overflow: hidden;
    }

    .map-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .map-info-item {
      background: rgba(255, 123, 0, 0.05);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      border: 2px solid rgba(255, 123, 0, 0.1);
      transition: all 0.3s ease;
    }

    .map-info-item:hover {
      transform: translateY(-5px);
      border-color: var(--button);
      box-shadow: 0 8px 20px rgba(255, 123, 0, 0.2);
    }

    .map-info-item .icon {
      font-size: 2em;
      margin-bottom: 10px;
      display: block;
    }

    .map-info-item strong {
      display: block;
      color: var(--text-dark);
      font-weight: 700;
      margin-bottom: 5px;
    }

    .map-info-item span {
      color: var(--text-light);
      font-size: 0.95em;
    }

    @media (max-width: 768px) {
      #schoolMap {
        height: 350px;
      }
      
      .map-widget {
        padding: 30px 20px;
      }
    }

    /* Bouncing Logo Animation */
    .running-student {
      position: fixed;
      width: 80px;
      height: 80px;
      z-index: 9999;
      filter: drop-shadow(2px 2px 8px rgba(0,0,0,0.3));
      cursor: pointer;
      transition: all 0.3s ease;
      border-radius: 50%;
      background: white;
      padding: 5px;
      box-shadow: 0 4px 15px rgba(252, 242, 89, 0.5);
      will-change: transform, left, top;
      opacity: 0;
      pointer-events: none;
      transform: scale(0);
    }

    .running-student.active {
      opacity: 1;
      pointer-events: auto;
      transform: scale(1);
    }

    .running-student img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 50%;
      animation: spin 3s linear infinite;
    }

    .running-student:hover {
      transform: scale(1.4) rotate(360deg);
      box-shadow: 0 8px 25px rgba(252, 242, 89, 0.8);
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    /* Message fade out animation */
    @keyframes fadeOut {
      0% {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
      100% {
        opacity: 0;
        transform: translateX(-50%) translateY(-30px);
      }
    }

    /* Important Events & Schedules Section */
    .announcements-section {
      padding: 80px 60px;
      background: linear-gradient(135deg, #e6f7ff 0%, #cceeff 50%, #ffffff 100%);
      position: relative;
      overflow: hidden;
    }

    .announcements-section h2 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 3em;
      font-weight: 800;
      color: var(--text-dark);
      text-align: center;
      margin-bottom: 20px;
    }

    .announcements-section > p {
      text-align: center;
      color: var(--text-light);
      font-size: 1.2em;
      margin-bottom: 50px;
    }

    .events-carousel-wrapper {
      position: relative;
      max-width: 900px;
      margin: 0 auto;
      padding: 0;
    }

    .events-container {
      position: relative;
      overflow: hidden;
      width: 100%;
    }

    .event-card {
      background: white;
      border-radius: 20px;
      padding: 35px 40px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      border: 2px solid rgba(74, 144, 226, 0.2);
      transition: all 0.4s ease;
      position: absolute;
      width: 100%;
      opacity: 0;
      visibility: hidden;
      transform: translateX(100%);
      overflow: hidden;
    }

    .event-card.active {
      opacity: 1;
      visibility: visible;
      transform: translateX(0);
      position: relative;
    }
    
    .event-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      width: 6px;
      background: linear-gradient(180deg, #4a90e2, #357abd);
    }
    
    .event-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(74, 144, 226, 0.2);
      border-color: #4a90e2;
    }
    
    .event-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(74, 144, 226, 0.15);
    }
    
    .event-icon {
      font-size: 3.5em;
      flex-shrink: 0;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
    }
    
    .event-header-text h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.8em;
      font-weight: 800;
      color: var(--text-dark);
      margin-bottom: 8px;
      line-height: 1.2;
    }
    
    .event-date-badge {
      display: inline-block;
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
      padding: 6px 16px;
      border-radius: 15px;
      font-weight: 700;
      font-size: 0.75em;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .event-content {
      color: var(--text-light);
      font-size: 1.05em;
      line-height: 1.7;
      margin-bottom: 20px;
    }
    
    .event-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }
    
    .event-detail-item {
      background: rgba(74, 144, 226, 0.08);
      padding: 12px 16px;
      border-radius: 10px;
      border-left: 3px solid #4a90e2;
      font-size: 0.95em;
      color: var(--text-dark);
      transition: all 0.3s ease;
    }
    
    .event-detail-item:hover {
      background: rgba(74, 144, 226, 0.15);
      transform: translateX(3px);
    }
    
    .event-detail-item strong {
      color: #4a90e2;
      display: block;
      margin-bottom: 4px;
      font-size: 0.88em;
      font-weight: 700;
    }
    
    .event-badge {
      display: inline-block;
      background: linear-gradient(135deg, #ff5722, #e64a19);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 0.82em;
      box-shadow: 0 3px 10px rgba(255, 87, 34, 0.3);
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 15px;
      display: inline-block;
    }
    
    .event-badge:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 87, 34, 0.4);
    }

    /* Carousel Navigation Buttons */
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(74, 144, 226, 0.7);
      color: white;
      border: none;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      font-size: 1.3em;
      cursor: pointer;
      z-index: 10;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
    }

    .carousel-btn:hover {
      background: rgba(74, 144, 226, 0.9);
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
    }

    .carousel-btn-prev {
      left: 10px;
    }

    .carousel-btn-next {
      right: 10px;
    }

    /* Mobile Responsive Styles */
    @media (max-width: 768px) {
      .events-carousel-wrapper {
        padding: 0 10px;
      }

      .carousel-btn {
        width: 35px;
        height: 35px;
        font-size: 1em;
      }

      .carousel-btn-prev {
        left: 5px;
      }

      .carousel-btn-next {
        right: 5px;
      }

      .event-card {
        padding: 25px 20px;
      }

      .event-icon {
        font-size: 2.5em;
      }

      .event-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }

      .event-header-text h3 {
        font-size: 1.4em;
      }

      .event-content {
        font-size: 0.95em;
      }

      .event-details {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .event-detail-item {
        padding: 10px 12px;
        font-size: 0.9em;
      }

      .announcements-section {
        padding: 60px 20px;
      }

      .announcements-section h2 {
        font-size: 2em;
      }

      .announcements-section > p {
        font-size: 1em;
      }
    }

    /* Carousel Indicators */
    .carousel-indicators {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 30px;
    }

    .indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(74, 144, 226, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .indicator:hover {
      background: rgba(74, 144, 226, 0.6);
      transform: scale(1.2);
    }

    .indicator.active {
      background: #4a90e2;
      width: 30px;
      border-radius: 6px;
    }

    /* ICT Club Section */
    .ict-club-section {
      padding: 80px 60px;
      background: linear-gradient(135deg, #f0f4ff 0%, #e6eeff 50%, #ffffff 100%);
      position: relative;
    }

    .ict-club-container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .ict-club-card {
      background: white;
      border-radius: 25px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      border: 3px solid #4a90e2;
      transition: all 0.4s ease;
    }

    .ict-club-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 50px rgba(74, 144, 226, 0.2);
    }

    .ict-club-header {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      padding: 35px 40px;
      display: flex;
      align-items: center;
      gap: 25px;
      border-bottom: 4px solid #2868a8;
    }

    .ict-club-logo {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 4px solid white;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      object-fit: cover;
    }

    .ict-club-header-text h2 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2.2em;
      font-weight: 800;
      color: white;
      margin: 0 0 8px 0;
    }

    .ict-club-subtitle {
      color: rgba(255, 255, 255, 0.95);
      font-size: 1.1em;
      font-weight: 600;
      margin: 0;
    }

    .ict-club-content {
      padding: 40px;
    }

    .ict-club-message {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 15px;
      border-left: 5px solid #4a90e2;
      margin-bottom: 30px;
    }

    .ict-club-message p {
      margin: 0 0 12px 0;
      color: var(--text-dark);
      font-size: 1.05em;
      line-height: 1.7;
    }

    .ict-club-message p:last-child {
      margin-bottom: 0;
    }

    .ict-club-note {
      color: #666;
      font-size: 0.95em !important;
      margin-top: 15px !important;
    }

    .student-id-list {
      background: #ffffff;
      border: 2px solid #e9ecef;
      border-radius: 15px;
      overflow: hidden;
      margin-bottom: 30px;
    }

    .id-list-header {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      padding: 20px 25px;
      display: flex;
      align-items: center;
      gap: 15px;
      border-bottom: 2px solid #dee2e6;
    }

    .id-icon {
      font-size: 2em;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    }

    .id-list-header h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5em;
      font-weight: 700;
      color: var(--text-dark);
      margin: 0;
    }

    .id-items {
      padding: 20px 25px;
      max-height: 400px;
      overflow-y: auto;
    }

    .id-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: #f8f9fa;
      border-radius: 10px;
      margin-bottom: 12px;
      border-left: 4px solid #4a90e2;
      transition: all 0.3s ease;
    }

    .id-item:hover {
      background: #e6f2ff;
      transform: translateX(5px);
      box-shadow: 0 3px 10px rgba(74, 144, 226, 0.2);
    }

    .id-item:last-child {
      margin-bottom: 0;
    }

    .id-number {
      font-family: 'Space Grotesk', monospace;
      font-size: 1.2em;
      font-weight: 700;
      color: var(--text-dark);
    }

    .id-status {
      color: #28a745;
      font-weight: 700;
      font-size: 1em;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .no-ids-message {
      text-align: center;
      padding: 40px 20px;
      color: #6c757d;
    }

    .no-ids-icon {
      font-size: 4em;
      display: block;
      margin-bottom: 15px;
      opacity: 0.5;
    }

    .no-ids-message p {
      margin: 8px 0;
      font-size: 1.1em;
    }

    .check-back {
      font-size: 0.95em !important;
      color: #999 !important;
      font-style: italic;
    }

    .ict-club-footer {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      padding: 25px;
      background: #f8f9fa;
      border-radius: 15px;
    }

    .footer-item {
      color: var(--text-dark);
      font-size: 0.95em;
      line-height: 1.6;
    }

    .footer-item strong {
      color: #4a90e2;
      display: block;
      margin-bottom: 5px;
    }

    /* School ID Application Button */
    .school-id-btn {
      display: inline-block;
      padding: 15px 40px;
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
      text-decoration: none;
      border-radius: 12px;
      font-weight: 700;
      font-size: 1.1em;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
    }

    .school-id-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(74, 144, 226, 0.4);
      background: linear-gradient(135deg, #357abd, #2868a8);
    }

    .school-id-btn:active {
      transform: translateY(-1px);
    }

    /* Mobile Responsive for ICT Club */
    @media (max-width: 768px) {
      .ict-club-section {
        padding: 60px 20px;
      }

      .ict-club-header {
        flex-direction: column;
        text-align: center;
        padding: 25px 20px;
      }

      .ict-club-logo {
        width: 70px;
        height: 70px;
      }

      .ict-club-header-text h2 {
        font-size: 1.6em;
      }

      .ict-club-subtitle {
        font-size: 1em;
      }

      .ict-club-content {
        padding: 25px 20px;
      }

      .ict-club-message {
        padding: 20px;
      }

      .id-items {
        padding: 15px;
      }

      .id-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
        padding: 12px 15px;
      }

      .id-number {
        font-size: 1.1em;
      }

      .ict-club-footer {
        grid-template-columns: 1fr;
        gap: 15px;
        padding: 20px;
      }
    }

    /* Empty State */
    .empty-events {
      text-align: center;
      padding: 80px 40px;
      background: white;
      border-radius: 25px;
      border: 3px dashed #4a90e2;
      max-width: 900px;
      margin: 0 auto;
    }

    .empty-events-icon {
      font-size: 5em;
      margin-bottom: 20px;
      opacity: 0.5;
    }

    .empty-events h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2em;
      color: var(--text-dark);
      margin-bottom: 15px;
    }

    .empty-events p {
      color: var(--text-light);
      font-size: 1.1em;
    }

    /* Daily Reminders Section */
    .daily-reminders-section {
      padding: 80px 60px;
      background: linear-gradient(135deg, #fff5e6 0%, #ffe6cc 50%, #ffffff 100%);
      position: relative;
      overflow: hidden;
    }
    
    .daily-reminders-section h2 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 3em;
      font-weight: 800;
      color: var(--text-dark);
      text-align: center;
      margin-bottom: 20px;
    }
    
    .daily-reminders-section > p {
      text-align: center;
      color: var(--text-light);
      font-size: 1.2em;
      margin-bottom: 50px;
    }
    
    .reminder-card {
      background: white;
      border-radius: 20px;
      padding: 35px 40px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      border: 2px solid rgba(255, 123, 0, 0.2);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
      max-width: 900px;
      margin: 0 auto;
    }
    
    .reminder-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      width: 6px;
      background: linear-gradient(180deg, var(--button), var(--primary));
    }
    
    .reminder-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(255, 123, 0, 0.2);
      border-color: var(--button);
    }
    
    .reminder-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(255, 123, 0, 0.15);
    }
    
    .reminder-icon {
      font-size: 3.5em;
      flex-shrink: 0;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
    }
    
    .reminder-header-text h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.8em;
      font-weight: 800;
      color: var(--text-dark);
      margin-bottom: 8px;
      line-height: 1.2;
    }
    
    .reminder-date-badge {
      display: inline-block;
      background: linear-gradient(135deg, var(--button), #ff5722);
      color: white;
      padding: 6px 16px;
      border-radius: 15px;
      font-weight: 700;
      font-size: 0.75em;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .reminder-content {
      color: var(--text-light);
      font-size: 1.05em;
      line-height: 1.7;
      margin-bottom: 20px;
    }
    
    .reminder-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
    }
    
    .reminder-detail-item {
      background: rgba(255, 123, 0, 0.08);
      padding: 12px 16px;
      border-radius: 10px;
      border-left: 3px solid var(--button);
      font-size: 0.95em;
      color: var(--text-dark);
      transition: all 0.3s ease;
    }
    
    .reminder-detail-item:hover {
      background: rgba(255, 123, 0, 0.15);
      transform: translateX(3px);
    }
    
    .reminder-detail-item strong {
      color: var(--button);
      display: block;
      margin-bottom: 4px;
      font-size: 0.88em;
      font-weight: 700;
    }

    @media (max-width: 768px) {
      .announcements-section {
        padding: 60px 20px;
      }

      .announcements-section h2 {
        font-size: 2em;
      }
      
      .event-card {
        padding: 30px 25px;
      }
      
      .event-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .event-icon {
        font-size: 3em;
      }
      
      .event-header-text h3 {
        font-size: 1.5em;
      }
      
      .event-details {
        grid-template-columns: 1fr;
      }
      
      .daily-reminders-section {
        padding: 60px 20px;
      }
      
      .daily-reminders-section h2 {
        font-size: 2em;
      }
      
      .reminder-card {
        padding: 30px 25px;
      }
      
      .reminder-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .reminder-icon {
        font-size: 3em;
      }
      
      .reminder-header-text h3 {
        font-size: 1.5em;
      }
      
      .reminder-details {
        grid-template-columns: 1fr;
      }
    }

    /* ===== WEATHER BACKGROUND EFFECTS ===== */
    .weather-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .weather-background.active {
      opacity: 1;
    }

    /* Sun Rays Effect */
    .sun-rays {
      position: absolute;
      top: -50%;
      left: 50%;
      width: 200%;
      height: 200%;
      transform: translate(-50%, 0);
      background: conic-gradient(
        from 0deg,
        transparent 0deg,
        rgba(255, 200, 50, 0.1) 10deg,
        transparent 20deg,
        transparent 40deg,
        rgba(255, 200, 50, 0.1) 50deg,
        transparent 60deg,
        transparent 80deg,
        rgba(255, 200, 50, 0.1) 90deg,
        transparent 100deg,
        transparent 120deg,
        rgba(255, 200, 50, 0.1) 130deg,
        transparent 140deg,
        transparent 160deg,
        rgba(255, 200, 50, 0.1) 170deg,
        transparent 180deg
      );
      animation: rotate-rays 60s linear infinite;
    }

    @keyframes rotate-rays {
      from { transform: translate(-50%, 0) rotate(0deg); }
      to { transform: translate(-50%, 0) rotate(360deg); }
    }

    /* Rain Effect */
    .rain-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .rain {
      position: absolute;
      width: 2px;
      height: 50px;
      background: linear-gradient(transparent, rgba(100, 150, 255, 0.6));
      animation: fall linear infinite;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh);
      }
    }

    /* Cloud Effect */
    .clouds-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .cloud {
      position: absolute;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 100px;
      animation: drift linear infinite;
    }

    .cloud::before,
    .cloud::after {
      content: '';
      position: absolute;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 100px;
    }

    .cloud::before {
      width: 50px;
      height: 50px;
      top: -25px;
      left: 10px;
    }

    .cloud::after {
      width: 60px;
      height: 60px;
      top: -30px;
      right: 10px;
    }

    @keyframes drift {
      from {
        transform: translateX(-100%);
      }
      to {
        transform: translateX(100vw);
      }
    }

    /* Thunder/Lightning Effect */
    .lightning {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0);
      animation: flash 4s infinite;
    }

    @keyframes flash {
      0%, 100% { background: rgba(255, 255, 255, 0); }
      49% { background: rgba(255, 255, 255, 0); }
      50% { background: rgba(255, 255, 255, 0.3); }
      51% { background: rgba(255, 255, 255, 0); }
      52% { background: rgba(255, 255, 255, 0.2); }
      53% { background: rgba(255, 255, 255, 0); }
    }

    /* Fog/Mist Effect */
    .fog {
      position: absolute;
      width: 200%;
      height: 100%;
      background: linear-gradient(
        90deg,
        rgba(200, 200, 200, 0) 0%,
        rgba(200, 200, 200, 0.3) 25%,
        rgba(200, 200, 200, 0.3) 75%,
        rgba(200, 200, 200, 0) 100%
      );
      animation: fog-drift 20s linear infinite;
    }

    @keyframes fog-drift {
      from { transform: translateX(-50%); }
      to { transform: translateX(0%); }
    }

    /* Partly Cloudy - Subtle clouds with light rays */
    .partly-cloudy-effect {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    /* Wind Effect */
    .wind-container {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none;
    }

    .wind-line {
      position: absolute;
      height: 2px;
      background: linear-gradient(90deg, 
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.6) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      animation: wind-blow 2s linear infinite;
      transform-origin: left center;
    }

    @keyframes wind-blow {
      0% {
        transform: translateX(-100%);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateX(100vw);
        opacity: 0;
      }
    }

  </style>
</head>
<body>
  <!-- Weather Background Effects -->
  <div class="weather-background" id="weatherBackground"></div>

  <!-- Emergency Alert Banner -->
  <div class="emergency-alert-banner" id="emergencyBanner">
    <div class="banner-content">
      <span class="banner-icon" id="bannerIcon">âš ï¸</span>
      <span id="bannerText">Weather Alert</span>
    </div>
    <button class="banner-close" id="bannerClose" aria-label="Close alert banner">Ã—</button>
  </div>

  <!-- Running Student Animation -->
  <div class="running-student" title="Click me - BSHS on the move!">
    <img src="bshs logo.jfif" alt="Balangkayan Senior High School Logo" loading="lazy">
  </div>
  <!-- HEADER -->
  <header class="animate-slide-down">
    <div class="logo transition-all duration-300 hover:scale-105">
      <img src="bshs logo.jfif" alt="Balangkayan Senior High School Logo" class="transition-transform duration-300 hover:rotate-6">
      <span class="logo-text">Balangkayan Senior High School - Stand Alone</span>
    </div>
    
    <button class="hamburger" id="hamburger" aria-label="Toggle navigation menu" aria-expanded="false">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </button>
    
    <nav id="mainNav">
      <ul>
        <li><a href="#hero" class="transition-all duration-300 hover:text-accent nav-link">Home</a></li>
        <li><a href="#daily-reminders" class="transition-all duration-300 hover:text-accent nav-link">Announcements</a></li>
        <li><a href="#about" class="transition-all duration-300 hover:text-accent nav-link">About</a></li>
        <li><a href="#programs" class="transition-all duration-300 hover:text-accent nav-link">Programs</a></li>
        <li class="hidden-element"><a href="login.html" class="transition-all duration-300 hover:text-accent nav-link">Admin Log in</a></li>
        <li>
          <button class="weather-toggle transition-all duration-300 hover:scale-110 hover:rotate-12" id="weatherToggle" aria-label="Check weather alerts">
            <span class="weather-icon">ðŸŒ¤ï¸</span>
          </button>
        </li>
        <li>
          <button class="theme-toggle transition-all duration-300 hover:scale-110 hover:rotate-12" id="themeToggle" aria-label="Toggle theme">
            <span class="theme-icon">ðŸŒ™</span>
          </button>
        </li>
      </ul>
    </nav>
  </header>

  <!-- WEATHER ALERT MODAL -->
  <div class="weather-modal" id="weatherModal">
    <div class="weather-modal-content">
      <button class="weather-modal-close" id="weatherModalClose">Ã—</button>
      <div class="weather-modal-header">
        <div class="weather-modal-icon" id="weatherModalIcon">ðŸŒ¤ï¸</div>
        <h3 class="weather-modal-title">Weather & Rainfall Alert</h3>
        <span class="weather-status normal" id="weatherStatus">Normal Conditions</span>
      </div>
      <div class="weather-info" id="weatherInfo">
        <p><strong>Current Status:</strong> <span id="weatherDescription">Checking weather conditions...</span></p>
        <p><strong>Rainfall Warning:</strong> <span id="rainfallWarning">None</span></p>
        <p><strong>Temperature:</strong> <span id="weatherTemp">--Â°C</span></p>
        <p style="font-size: 0.85em; margin-top: 15px; padding: 12px; background: rgba(255, 152, 0, 0.1); border-left: 3px solid #ff9800; border-radius: 8px;">
          <strong>âš ï¸ IMPORTANT:</strong> This is automated weather data. For official rainfall warnings and class suspensions, always prioritize:
          <br>â€¢ <strong>PAGASA</strong> (Philippine Atmospheric, Geophysical and Astronomical Services Administration)
          <br>â€¢ <strong>NDRRMC</strong> (National Disaster Risk Reduction and Management Council)
          <br>â€¢ <strong>DepEd Official Announcements</strong>
          <br>â€¢ <strong>Local Government Units (LGU)</strong>
        </p>
        <p style="font-size: 0.85em; margin-top: 10px; opacity: 0.8;"><em>Weather data updates every 10 minutes but may lag behind real-time conditions during severe weather events.</em></p>
      </div>
      <div class="suspension-notice" id="suspensionNotice" style="display: none;">
        <h4>âš ï¸ Class Suspension Guidelines</h4>
        <p id="suspensionText"></p>
      </div>
      <div class="weather-update-time" id="weatherUpdateTime">
        Last updated: --
      </div>
    </div>
  </div>

  <!-- HERO -->
  <section class="hero" id="hero">
    <div class="hero-content animate-slide-up">
      <h1 class="animate-fade-in">Building <span class="highlight">Bright</span> Futures</h1>
      <p class="animate-fade-in delay-200">At Balangkayan Senior High School - Stand Alone, we empower learners with knowledge, skills, and values to thrive in life and make a difference in the world.</p>
      <button class="btn transition-all duration-300 hover:scale-105 hover:shadow-2xl enroll-btn delay-400 hidden-element">
        <span>Enroll Now</span>
        <span class="inline-block transition-transform duration-300 group-hover:translate-x-2">â†’</span>
      </button>
    </div>
    <div class="hero-visual animate-slide-up delay-300">
      <div class="hero-visual-card transition-all duration-500 hover:rotate-0 hover:scale-105">
        <span class="icon animate-bounce-slow">ðŸŽ“</span>
        <h3 class="transition-colors duration-300">Start Your Journey</h3>
        <p class="transition-opacity duration-300">Join our community of excellence</p>
      </div>
    </div>
  </section>

  <!-- DAILY REMINDERS -->
  <section class="daily-reminders-section animate-on-scroll transition-all duration-700" id="daily-reminders">
    <h2 class="transition-all duration-500 hover:scale-105">ðŸ“… Today's Reminder</h2>
    <p>Your daily guide for uniforms, ceremonies, and school activities</p>
    
    <div id="daily-reminder-container">
      <!-- Daily reminder will be generated by JavaScript -->
    </div>
  </section>

  <!-- IMPORTANT EVENTS & SCHEDULES -->
  <section class="announcements-section animate-on-scroll transition-all duration-700" id="announcements">
    <h2 class="transition-all duration-500 hover:scale-105">ðŸ“¢ Important Events & Schedules</h2>
    <p>Stay updated with upcoming exams, events, and important dates</p>
    
    <div class="events-carousel-wrapper">
      <button class="carousel-btn carousel-btn-prev" onclick="moveCarousel(-1)">â®</button>
      <div class="events-container">
        <!-- Event Cards (add your important events and exams here) -->
        <div class="event-card active" data-expiry="2025-10-24">
        <div class="event-header">
          <div class="event-icon">ðŸ“</div>
          <div class="event-header-text">
            <h3>Second Quarter Examinations</h3>
            <span class="event-date-badge">ðŸ“… October 23 & 24, 2025</span>
          </div>
        </div>
        <div class="event-content">
          <p>The Second Quarter Examinations will be held on October 23 and 24, 2025. Prepare well and review your lessons. Good luck to all students!</p>
        </div>
        <div class="event-details">
          <div class="event-detail-item">
            <strong>ðŸ“… Dates</strong>
            October 23 & 24, 2025
          </div>
          <div class="event-detail-item">
            <strong>ðŸ“š Preparation</strong>
            Review all lessons thoroughly
          </div>
          <div class="event-detail-item">
            <strong>âœï¸ Requirements</strong>
            Bring pens, pencils, and School ID (strictly required)
          </div>
        </div>
        <span class="event-badge">Important</span>
      </div>

      <!-- HOPE Exam Schedule -->
      <div class="event-card" data-expiry="2025-10-22">
        <div class="event-header">
          <div class="event-icon">ðŸƒ</div>
          <div class="event-header-text">
            <h3>HOPE Exam - Early Schedule Available</h3>
            <span class="event-date-badge">ðŸ“… October 22, 2025 (Today)</span>
          </div>
        </div>
        <div class="event-content">
          <p>HOPE classes can take the exam early today because TVL 12 HOPE students are scheduled for their exam. Please coordinate with your HOPE teacher for the exact time.</p>
        </div>
        <div class="event-details">
          <div class="event-detail-item">
            <strong>ðŸ“… Date</strong>
            Wednesday, October 22, 2025
          </div>
          <div class="event-detail-item">
            <strong>ðŸ“š Subject</strong>
            HOPE (Health Optimizing Physical Education)
          </div>
          <div class="event-detail-item">
            <strong>ðŸ‘¥ Priority</strong>
            TVL 12 HOPE students scheduled
          </div>
          <div class="event-detail-item">
            <strong>âœï¸ Requirements</strong>
            Bring pens, pencils, and School ID (strictly required)
          </div>
        </div>
        <span class="event-badge">Today</span>
      </div>

      </div>
      <button class="carousel-btn carousel-btn-next" onclick="moveCarousel(1)">â¯</button>
    </div>
    <div class="carousel-indicators">
      <!-- Indicators generated dynamically by JavaScript -->
    </div>
    
    <!-- Add more event cards here as needed -->
      <!-- Example:
      <div class="event-card">
        <div class="event-header">
          <div class="event-icon">ðŸŽ‰</div>
          <div class="event-header-text">
            <h3>Foundation Day Celebration</h3>
            <span class="event-date-badge">ðŸ“… November 15, 2025</span>
          </div>
        </div>
        <div class="event-content">
          <p>Join us for our annual Foundation Day celebration!</p>
        </div>
        <div class="event-details">
          <div class="event-detail-item">
            <strong>ðŸ“… Date</strong>
            November 15, 2025
          </div>
          <div class="event-detail-item">
            <strong>â° Time</strong>
            8:00 AM - 5:00 PM
          </div>
        </div>
        <span class="event-badge">Event</span>
      </div>
      -->
    </div>
  </section>

  <!-- ICT CLUB - SCHOOL ID READY FOR RELEASE -->
  <section class="ict-club-section animate-on-scroll transition-all duration-700" id="ict-club">
    <div class="ict-club-container">
      <div class="ict-club-card">
        <div class="ict-club-header">
          <img src="ictclub.jpg" alt="ICT Club Logo" class="ict-club-logo">
          <div class="ict-club-header-text">
            <h2>ðŸ†” ICT Club Announcement</h2>
            <p class="ict-club-subtitle">School ID Ready for Release</p>
          </div>
        </div>
        
        <div class="ict-club-content">
          <div class="ict-club-message">
            <p>ðŸ“¢ <strong>Attention Students!</strong> The following School IDs are now ready for release. Please proceed to the <strong>ICT Laboratory</strong> to claim your ID.</p>
            <p class="ict-club-note">ðŸ’¡ <em>Please verify your LRN when claiming your School ID.</em></p>
          </div>
          
          <div class="student-id-list" id="studentIdList">
            <!-- Student IDs will be displayed here -->
            <div class="id-list-header">
              <span class="id-icon">ðŸŽ“</span>
              <h3>Ready for Release</h3>
            </div>
            <div class="id-items" id="idItems">
              <!-- Add student IDs here - Example format:
              <div class="id-item">
                <span class="id-number">2025-001234</span>
                <span class="id-status">âœ“ Ready</span>
              </div>
              -->
              <div class="no-ids-message">
                <span class="no-ids-icon">ðŸ“­</span>
                <p>No IDs ready for release at the moment.</p>
                <p class="check-back">Check back later for updates!</p>
              </div>
            </div>
          </div>
          
          <div class="ict-club-footer">
            <div class="footer-item">
              <strong>ðŸ“ Location:</strong> ICT Laboratory
            </div>
            <div class="footer-item">
              <strong>â° Office Hours:</strong> Monday - Friday, 8:00 AM - 4:00 PM
            </div>
            <div class="footer-item">
              <strong>ðŸ“ž Contact:</strong> ICT Club Officers
            </div>
          </div>

          <!-- School ID Application Button -->
          <div style="margin-top: 30px; text-align: center;">
            <a href="schoolID.html" class="school-id-btn" target="_blank">
              ðŸ†” Apply for School ID
            </a>
            <p style="margin-top: 12px; color: var(--text-light); font-size: 0.9em;">
              Click here to fill out the School ID application form
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="animate-on-scroll transition-all duration-700">
    <h2 class="transition-all duration-500 hover:scale-105">About Us</h2>
    <p class="transition-opacity duration-500 hover:opacity-90">Balangkayan Senior High School - Stand Alone is committed to providing quality education that prepares students for college, careers, and life. We offer a supportive learning environment where every student can discover their potential and achieve their dreams.</p>
  </section>

  <!-- PERFORMANCE PLEDGE -->
  <section id="pledge" class="animate-on-scroll transition-all duration-700" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 100px 60px;">
    <h2 class="transition-all duration-500 hover:scale-105">Performance Pledge</h2>
    <p class="transition-opacity duration-500" style="font-style: italic; color: var(--text-dark); font-weight: 600; margin-bottom: 50px;">We, the teaching and non-teaching staff of BALANGKAYAN SENIOR HIGH SCHOOL - STAND ALONE, pledge to:</p>
    <div style="max-width: 1000px; margin: 0 auto;">
      <div class="transition-all duration-500 hover:shadow-2xl" style="background: #fff; padding: 50px 45px; border-radius: 25px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12); border-left: 6px solid var(--primary);">
        <ul style="list-style: none; padding: 0; margin: 0;">
          <li style="padding: 18px 0; border-bottom: 1px solid #e9ecef; font-size: 1.05em; color: var(--text-dark); line-height: 1.8;">
            <strong style="color: var(--button); font-size: 2.05em; margin-right: 15px;">S</strong>erve you promptly, efficiently and with utmost courtesy;
          </li>
          <li style="padding: 18px 0; border-bottom: 1px solid #e9ecef; font-size: 1.05em; color: var(--text-dark); line-height: 1.8;">
            <strong style="color: var(--button); font-size: 2.05em; margin-right: 15px;">E</strong>nsure strict compliance with service rendered;
          </li>
          <li style="padding: 18px 0; border-bottom: 1px solid #e9ecef; font-size: 1.05em; color: var(--text-dark); line-height: 1.8;">
            <strong style="color: var(--button); font-size: 2.05em; margin-right: 15px;">R</strong>espond to any complaint about services as soon as possible;
          </li>
          <li style="padding: 18px 0; border-bottom: 1px solid #e9ecef; font-size: 1.05em; color: var(--text-dark); line-height: 1.8;">
            <strong style="color: var(--button); font-size: 2.05em; margin-right: 15px;">V</strong>alue every citizen's comments, suggestions and needs;
          </li>
          <li style="padding: 18px 0; border-bottom: 1px solid #e9ecef; font-size: 1.05em; color: var(--text-dark); line-height: 1.8;">
            <strong style="color: var(--button); font-size: 2.05em; margin-right: 15px;">E</strong>mpower the public through 24/7 access to information and our policies, programs, activities and services.
          </li>
        </ul>
        <p style="margin-top: 35px; text-align: center; font-style: italic; color: var(--text-light); font-size: 1.1em;">
          All this we pledge
        </p>
        <p style="text-align: center; color: var(--text-dark); font-weight: 600; margin-top: 25px; font-size: 1.05em;">
          Because you deserve no less.
        </p>
      </div>
    </div>
  </section>

  <!-- PROGRAMS -->
  <section id="programs" class="animate-on-scroll">
    <h2>Our Programs</h2>
    <p>Choose from our diverse academic tracks designed to match your interests and career goals.</p>
    <div class="programs-grid">
      <div class="program-card transition-all duration-500 hover:scale-105 hover:shadow-2xl cursor-pointer">
        <div class="program-card-front">
          <span class="icon transition-transform duration-300 hover:scale-110">ðŸ“š</span>
          <div class="title transition-colors duration-300">Academic Track</div>
          <div class="description transition-opacity duration-300">Prepare for college with specialized strands. Click to view strands!</div>
        </div>
        <div class="program-card-back">
          <div class="title">Academic Track Strands</div>
          <ul class="strands-list">
            <li>ABM (Accountancy, Business & Management)</li>
            <li>HUMSS (Humanities & Social Sciences)</li>
          </ul>
          <button class="back-button">â† Back</button>
        </div>
      </div>
      <div class="program-card transition-all duration-500 hover:scale-105 hover:shadow-2xl cursor-pointer">
        <div class="program-card-front">
          <span class="icon transition-transform duration-300 hover:scale-110">ðŸ”§</span>
          <div class="title transition-colors duration-300">Technical-Vocational Track</div>
          <div class="description transition-opacity duration-300">Gain practical skills and certifications. Click to view strands!</div>
        </div>
        <div class="program-card-back">
          <div class="title">TVL Track Strands</div>
          <ul class="strands-list">
            <li>EIM (Electrical Installation & Maintenance)</li>
            <li>CSS (Computer Systems Servicing)</li>
            <li>Home Economics</li>
          </ul>
          <button class="back-button">â† Back</button>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section class="animate-on-scroll transition-all duration-700">
    <h2 class="transition-all duration-500 hover:scale-105">Mission and Vision</h2>
    <p class="transition-opacity duration-500">Our commitment to excellence in education and our aspirations for every student's success.</p>
    <div class="testimonials-container">
      <div class="testimonial transition-all duration-500 hover:scale-105 hover:shadow-2xl">
        <p class="transition-opacity duration-300">We dream of Filipinos who passionately love their country and whose values and competencies enable them to realize their full potential and contribute meaningfully to building the nation.</p>
        <div class="author transition-colors duration-300">â€” BSHS Vision </div>
      </div>
      <div class="testimonial transition-all duration-500 hover:scale-105 hover:shadow-2xl">
        <p class="transition-opacity duration-300">To protect and promote the right of every Filipino to quality, equitable, culture-based and complete basic education.</p>
        <div class="author transition-colors duration-300">â€” BSHS Mission</div>
      </div>
    </div>
  </section>

  <!-- LOCATION MAP -->
  <section id="location" class="animate-on-scroll transition-all duration-700">
    <h2 class="transition-all duration-500 hover:scale-105">Find Us</h2>
    <p class="transition-opacity duration-500">Visit our campus and discover the BSHS learning environment.</p>
    <div class="map-widget transition-all duration-500 hover:shadow-2xl">
      <h3 class="animate-pulse-slow">ðŸ“ School Location</h3>
      <p>Balangkayan Senior High School - Stand Alone, Balangkayan, Eastern Samar</p>
      <div id="schoolMap" class="transition-all duration-300"></div>
      <div class="map-info">
        <div class="map-info-item transition-all duration-300 hover:scale-105 hover:bg-orange-50">
          <span class="icon">ðŸ“</span>
          <strong>Address</strong>
          <span>Balangkayan, Eastern Samar</span>
        </div>
        <div class="map-info-item transition-all duration-300 hover:scale-105 hover:bg-orange-50">
          <span class="icon">ðŸ—ºï¸</span>
          <strong>Coordinates</strong>
          <span>11.477476, 125.506518</span>
        </div>
        <div class="map-info-item transition-all duration-300 hover:scale-105 hover:bg-orange-50">
          <span class="icon">ðŸšŒ</span>
          <strong>Accessibility</strong>
          <span>Accessible via public transport</span>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="animate-fade-in">
    <p class="transition-opacity duration-500 hover:opacity-80">&copy; 2025 Balangkayan Senior High School - Stand Alone. All Rights Reserved.</p>
    <div class="social-icons">
      <a href="#" aria-label="Facebook" class="transition-all duration-300 hover:scale-125 hover:-translate-y-2">ðŸ“˜</a>
      <a href="#" aria-label="Twitter" class="transition-all duration-300 hover:scale-125 hover:-translate-y-2">ðŸ¦</a>
      <a href="#" aria-label="Instagram" class="transition-all duration-300 hover:scale-125 hover:-translate-y-2">ðŸ“·</a>
      <a href="#" aria-label="Email" class="transition-all duration-300 hover:scale-125 hover:-translate-y-2">âœ‰ï¸</a>
    </div>
  </footer>

  <!-- AI CHATBOT -->
  <div class="chatbot-container">
    <button class="chatbot-button transition-all duration-300 hover:scale-110 animate-bounce-slow" id="chatbotToggle">
      ðŸ¤–
    </button>
    <div class="chatbot-window" id="chatbotWindow">
      <div class="chatbot-header">
        <div class="avatar">ðŸ¤–</div>
        <div class="info">
          <h3>BSHS Assistant</h3>
          <p>Online â€¢ Ready to help</p>
        </div>
      </div>
      <div class="chatbot-messages" id="chatbotMessages">
        <div class="message">
          <div class="avatar">ðŸ¤–</div>
          <div>
            <div class="bubble">
              Hello! I'm the BSHS virtual assistant. How can I help you today?
            </div>
            <div class="quick-replies">
              <button class="quick-reply transition-all duration-300 hover:scale-105 hover:shadow-lg" data-reply="What programs do you offer?">Programs</button>
              <!-- <button class="quick-reply transition-all duration-300 hover:scale-105 hover:shadow-lg" data-reply="How do I enroll?">Enrollment</button> -->
              <button class="quick-reply transition-all duration-300 hover:scale-105 hover:shadow-lg" data-reply="What are your contact details?">Contact</button>
              <button class="quick-reply transition-all duration-300 hover:scale-105 hover:shadow-lg" data-reply="Easter Egg">ðŸŽ‰ Easter Egg</button>
            </div>
          </div>
        </div>
      </div>
      <div class="chatbot-input-area">
        <input type="text" class="chatbot-input transition-all duration-300 focus:scale-105" id="chatbotInput" placeholder="Type your message...">
        <button class="chatbot-send transition-all duration-300 hover:scale-110 hover:rotate-12" id="chatbotSend">âž¤</button>
      </div>
    </div>
  </div>

  <script>
    // ===== THEME SWITCHER =====
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.querySelector('.theme-icon');
    const body = document.body;

    // HTML Sanitization function to prevent XSS attacks
    function sanitizeHTML(str) {
      const temp = document.createElement('div');
      temp.textContent = str;
      return temp.innerHTML;
    }

    // Safe HTML setter that allows only specific safe tags
    function setSafeHTML(element, html) {
      // Create a temporary element to parse HTML
      const temp = document.createElement('div');
      temp.innerHTML = html;
      
      // Define allowed tags and attributes
      const allowedTags = ['strong', 'br', 'em', 'b', 'i', 'u', 'span', 'p', 'ul', 'li', 'ol', 'div', 'h3', 'h4'];
      const allowedAttributes = ['class', 'style', 'id'];
      
      // Recursively clean the HTML
      function cleanNode(node) {
        if (node.nodeType === Node.TEXT_NODE) {
          return node.cloneNode();
        }
        
        if (node.nodeType === Node.ELEMENT_NODE) {
          const tagName = node.tagName.toLowerCase();
          
          // Only allow whitelisted tags
          if (!allowedTags.includes(tagName)) {
            // Replace disallowed tags with their text content
            const textNode = document.createTextNode(node.textContent);
            return textNode;
          }
          
          // Create new element with same tag
          const newNode = document.createElement(tagName);
          
          // Copy only allowed attributes
          for (let attr of node.attributes) {
            if (allowedAttributes.includes(attr.name.toLowerCase())) {
              newNode.setAttribute(attr.name, attr.value);
            }
          }
          
          // Recursively clean children
          for (let child of node.childNodes) {
            const cleanedChild = cleanNode(child);
            if (cleanedChild) {
              newNode.appendChild(cleanedChild);
            }
          }
          
          return newNode;
        }
        
        return null;
      }
      
      // Clean all child nodes
      const fragment = document.createDocumentFragment();
      for (let child of temp.childNodes) {
        const cleanedChild = cleanNode(child);
        if (cleanedChild) {
          fragment.appendChild(cleanedChild);
        }
      }
      
      // Clear element and append cleaned content
      element.innerHTML = '';
      element.appendChild(fragment);
    }

    // Check for saved theme preference or default to light mode
    const currentTheme = localStorage.getItem('theme') || 'light';
    if (currentTheme === 'dark' && themeIcon) {
      body.classList.add('dark-mode');
      themeIcon.textContent = 'â˜€ï¸';
    }

    // Toggle theme
    if (themeToggle && themeIcon) {
      themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      
      if (body.classList.contains('dark-mode')) {
        themeIcon.textContent = 'â˜€ï¸';
        localStorage.setItem('theme', 'dark');
      } else {
        themeIcon.textContent = 'ðŸŒ™';
        localStorage.setItem('theme', 'light');
      }
      });
    }

    // Header scroll effect
    const header = document.querySelector('header');
    let lastScroll = 0;

    if (header) {
      window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        
        if (currentScroll > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
        
        lastScroll = currentScroll;
      });
    }

    // Hamburger menu toggle
    const hamburger = document.getElementById('hamburger');
    const mainNav = document.getElementById('mainNav');
    const navLinks = document.querySelectorAll('.nav-link');

    if (hamburger && mainNav) {
      hamburger.addEventListener('click', () => {
        const isActive = hamburger.classList.toggle('active');
        mainNav.classList.toggle('active');
        document.body.style.overflow = isActive ? 'hidden' : '';
        hamburger.setAttribute('aria-expanded', isActive);
      });
    }

    // Close menu when clicking on a link
    if (hamburger && mainNav && navLinks.length > 0) {
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          hamburger.classList.remove('active');
          mainNav.classList.remove('active');
          document.body.style.overflow = '';
          hamburger.setAttribute('aria-expanded', 'false');
        });
      });
    }

    // Close menu when clicking outside
    if (hamburger && mainNav) {
      document.addEventListener('click', (e) => {
        if (!mainNav.contains(e.target) && !hamburger.contains(e.target) && mainNav.classList.contains('active')) {
          hamburger.classList.remove('active');
          mainNav.classList.remove('active');
          document.body.style.overflow = '';
          hamburger.setAttribute('aria-expanded', 'false');
        }
      });
    }


    // ===== WEATHER ALERT SYSTEM =====
    const weatherToggle = document.getElementById('weatherToggle');
    const weatherModal = document.getElementById('weatherModal');
    const weatherModalClose = document.getElementById('weatherModalClose');
    const weatherIcon = document.querySelector('.weather-icon');
    const weatherModalIcon = document.getElementById('weatherModalIcon');
    const weatherStatus = document.getElementById('weatherStatus');
    const weatherDescription = document.getElementById('weatherDescription');
    const rainfallWarning = document.getElementById('rainfallWarning');
    const weatherTemp = document.getElementById('weatherTemp');
    const suspensionNotice = document.getElementById('suspensionNotice');
    const suspensionText = document.getElementById('suspensionText');
    const weatherUpdateTime = document.getElementById('weatherUpdateTime');
    const emergencyBanner = document.getElementById('emergencyBanner');
    const bannerText = document.getElementById('bannerText');
    const bannerIcon = document.getElementById('bannerIcon');
    const bannerClose = document.getElementById('bannerClose');

    // Null check for critical weather elements
    if (!weatherToggle || !weatherModal || !weatherModalClose || !weatherIcon || 
        !weatherModalIcon || !weatherStatus || !weatherDescription || !rainfallWarning || 
        !weatherTemp || !suspensionNotice || !suspensionText || !weatherUpdateTime || 
        !emergencyBanner || !bannerText || !bannerIcon || !bannerClose) {
      console.warn('Weather system: One or more required elements not found. Weather features disabled.');
    }

    let currentWeatherData = null;
    let bannerDismissed = false;
    let weatherDataCache = {
      data: null,
      timestamp: 0,
      cacheTime: 2 * 60 * 1000 // 2 minutes cache (more frequent updates for accuracy)
    };
    
    // Centralized function to calculate rainfall intensity from weather data
    function calculateRainfallIntensity(data) {
      let rainfallIntensity = 0;
      
      // PRIORITY 1: Check current actual precipitation (most accurate for real-time)
      const currentPrecip = data.current.precip_mm || 0;
      if (currentPrecip >= 0.1) {
        rainfallIntensity = currentPrecip;
      }
      
      // PRIORITY 2: If no current precip, check hourly forecast for this hour
      if (rainfallIntensity === 0 && data.forecast && data.forecast.forecastday && data.forecast.forecastday[0]) {
        const today = data.forecast.forecastday[0];
        
        // Use API's location time to get correct hour (not browser time)
        // API returns location_localtime_epoch which is the location's current time
        const locationTime = new Date((data.location.localtime_epoch || Math.floor(Date.now() / 1000)) * 1000);
        const currentHour = locationTime.getHours();
        
        if (today.hour && today.hour[currentHour]) {
          const currentHourData = today.hour[currentHour];
          const hourlyPrecip = currentHourData.precip_mm || 0;
          
          // Use actual precipitation value if >= 0.1mm (measurable)
          // Don't rely on will_it_rain flag as it may not match actual precip data
          rainfallIntensity = hourlyPrecip >= 0.1 ? hourlyPrecip : 0;
        }
      }
      
      return rainfallIntensity;
    }
    
    // Centralized function to fetch weather data with caching
    async function fetchWeatherData(forceRefresh = false) {
      const now = Date.now();
      
      // Return cached data if still valid
      if (!forceRefresh && weatherDataCache.data && (now - weatherDataCache.timestamp) < weatherDataCache.cacheTime) {
        return weatherDataCache.data;
      }
      
      try {
        // Direct API call to WeatherAPI.com
        const apiKey = '772090ef7d8e457bbd175713251810';
        const location = 'Balangkayan,Eastern Samar,Philippines';
        const response = await fetch(
          `https://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${encodeURIComponent(location)}&days=1&aqi=no&alerts=yes`
        );
        
        if (!response.ok) {
          throw new Error(`Weather API error: ${response.status}`);
        }
        
        const data = await response.json();
        
        // Update cache
        weatherDataCache.data = data;
        weatherDataCache.timestamp = now;
        
        return data;
      } catch (error) {
        console.error('Weather fetch error:', error);
        // Return cached data if available, even if expired
        if (weatherDataCache.data) {
          console.warn('Using cached weather data due to fetch error');
          return weatherDataCache.data;
        }
        throw error;
      }
    }

    // Banner close button
    if (bannerClose) {
      bannerClose.addEventListener('click', () => {
        emergencyBanner.classList.remove('active');
        document.body.classList.remove('banner-active');
        bannerDismissed = true;
        // Reset after 30 minutes
        setTimeout(() => {
          bannerDismissed = false;
        }, 1800000);
      });
    }

    // Open weather modal
    if (weatherToggle && weatherModal) {
      weatherToggle.addEventListener('click', () => {
        weatherModal.classList.add('active');
        updateWeatherInfo();
      });
    }

    // Close weather modal
    if (weatherModalClose && weatherModal) {
      weatherModalClose.addEventListener('click', () => {
        weatherModal.classList.remove('active');
      });
    }

    // Close modal when clicking outside
    if (weatherModal) {
      weatherModal.addEventListener('click', (e) => {
        if (e.target === weatherModal) {
          weatherModal.classList.remove('active');
        }
      });
    }

    // Fetch weather data and check rainfall warnings
    async function updateWeatherInfo() {
      try {
        // Use centralized fetch with caching
        const data = await fetchWeatherData();
        currentWeatherData = data;
        
        // Get current weather from WeatherAPI.com response
        const temp = data.current.temp_c;
        const feelsLike = data.current.feelslike_c; // Heat index / feels-like temperature
        const humidity = data.current.humidity || 0;
        const windSpeed = data.current.wind_kph || 0;
        const condition = data.current.condition.text;
        const conditionLower = condition.toLowerCase();
        
        // Use centralized rainfall calculation
        const rainfallIntensity = calculateRainfallIntensity(data);
        
        // Determine if it's actually raining based on MEASURABLE rainfall
        // Don't rely solely on condition text (e.g., "Patchy rain" might not mean active rain)
        const isRaining = rainfallIntensity >= 0.5; // At least 0.5mm/h to be considered "raining"
        
        // Update temperature
        weatherTemp.textContent = `${temp}Â°C`;
        
        // Helper function to get day-specific advice
        const getDaySpecificAdvice = (dayOfWeek, adviceType = 'normal') => {
          const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
          
          if (isWeekend) {
            if (adviceType === 'rain') {
              return '<br>â€¢ ðŸŽ‰ <strong>No classes today - It\'s the weekend!</strong><br>â€¢ Stay safe and dry at home';
            } else if (adviceType === 'sunny') {
              return '<br>â€¢ ðŸŽ‰ <strong>No classes - Enjoy your weekend!</strong><br>â€¢ Perfect weather for outdoor activities!';
            } else {
              return '<br>â€¢ ðŸŽ‰ <strong>No classes - Enjoy your weekend!</strong>';
            }
          } else if (dayOfWeek === 1) { // Monday
            if (adviceType === 'rain') {
              return '<br>â€¢ ðŸ‡µðŸ‡­ <strong>Flag Ceremony may be cancelled</strong> due to rain';
            } else if (adviceType === 'sunny') {
              return '<br>â€¢ ðŸ‡µðŸ‡­ <strong>FLAG CEREMONY TODAY</strong> - Be on time!';
            } else {
              return '<br>â€¢ ðŸ‡µðŸ‡­ <strong>FLAG CEREMONY TODAY</strong> - Bring umbrella just in case';
            }
          } else if (dayOfWeek === 3) { // Wednesday
            return '<br>â€¢ ðŸ‘• <strong>WASH DAY</strong> - Proper civilian attire allowed';
          } else if (dayOfWeek === 5) { // Friday
            return '<br>â€¢ ðŸ‡µðŸ‡­ <strong>FLAG RETREAT at 4:00 PM</strong>';
          }
          return '';
        };
        
        // Calculate heat index info (reusable across weather conditions)
        const heatIndexInfo = feelsLike > temp 
          ? `<br>â€¢ ðŸŒ¡ï¸ <strong>Temperature:</strong> ${temp}Â°C (Feels like ${feelsLike}Â°C)` 
          : `<br>â€¢ ðŸŒ¡ï¸ <strong>Temperature:</strong> ${temp}Â°C`;
        
        // Get current day for day-specific advice
        const currentDate = new Date();
        const dayOfWeek = currentDate.getDay(); // 0=Sunday, 1=Monday, etc.
        const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        const currentDay = dayNames[dayOfWeek];
        
        // Determine rainfall warning level based on DepEd Order No. 022, s. 2024
        let warningLevel = 'normal';
        let warningText = 'None';
        let statusText = 'Normal Conditions';
        let icon = 'ðŸŒ¤ï¸';
        let suspensionInfo = '';
        
        // Rainfall thresholds based on DepEd Order No. 022, s. 2024
        // Yellow: 7.5-15 mm/hour (Light to Moderate)
        // Orange: 15-30 mm/hour (Moderate to Heavy)
        // Red: >30 mm/hour (Heavy to Intense)
        
        // Weather data fetched successfully
        
        if (rainfallIntensity >= 30) {
          warningLevel = 'red';
          warningText = 'RED RAINFALL WARNING';
          statusText = 'Heavy to Intense Rainfall (>30mm/h)';
          icon = 'ðŸ”´';
          weatherToggle.classList.add('warning');
          suspensionInfo = `<strong>RED WARNING (>30mm/hour):</strong><br>
            â€¢ <strong>AUTOMATIC SUSPENSION</strong> of classes in ALL LEVELS<br>
            â€¢ Includes: Pre-school, Elementary, Junior High School, Senior High School<br>
            â€¢ Suspension may be declared 2 hours before class schedule or during class hours<br>
            â€¢ <strong>Stay indoors and monitor official DepEd announcements</strong><br>
            â€¢ Location: Eastern Visayas Region (Region VIII)`;
          
          // Show emergency banner for RED warning
          if (!bannerDismissed) {
            emergencyBanner.classList.add('active');
            emergencyBanner.classList.remove('orange');
            document.body.classList.add('banner-active');
            bannerIcon.textContent = 'ðŸ”´';
            bannerText.textContent = 'âš ï¸ RED RAINFALL WARNING - AUTOMATIC CLASS SUSPENSION FOR ALL LEVELS';
          }
        } else if (rainfallIntensity >= 15) {
          warningLevel = 'orange';
          warningText = 'ORANGE RAINFALL WARNING';
          statusText = 'Moderate to Heavy Rainfall (15-30mm/h)';
          icon = 'ðŸŸ ';
          weatherToggle.classList.add('warning');
          suspensionInfo = `<strong>ORANGE WARNING (15-30mm/hour):</strong><br>
            â€¢ <strong>POSSIBLE SUSPENSION</strong> of classes in Pre-school, Elementary, and Junior High School<br>
            â€¢ Senior High School classes may continue with caution<br>
            â€¢ Monitor official announcements from DepEd Division Office and local authorities<br>
            â€¢ Be prepared for possible class suspension<br>
            â€¢ Location: Eastern Visayas Region (Region VIII)`;
          
          // Show emergency banner for ORANGE warning
          if (!bannerDismissed) {
            emergencyBanner.classList.add('active', 'orange');
            document.body.classList.add('banner-active');
            bannerIcon.textContent = 'ðŸŸ ';
            bannerText.textContent = 'âš ï¸ ORANGE RAINFALL WARNING - POSSIBLE CLASS SUSPENSION (Pre-school, Elementary, JHS)';
          }
        } else if (rainfallIntensity >= 7.5) {
          warningLevel = 'yellow';
          warningText = 'YELLOW RAINFALL WARNING';
          statusText = 'Light to Moderate Rainfall (7.5-15mm/h)';
          icon = 'ðŸŸ¡';
          suspensionInfo = `<strong>YELLOW WARNING (7.5-15mm/hour):</strong><br>
            â€¢ Classes continue as normal<br>
            â€¢ Be prepared for possible weather changes<br>
            â€¢ Bring umbrellas and rain gear<br>
            â€¢ Stay updated with weather advisories<br>
            â€¢ Location: Eastern Visayas Region (Region VIII)`;
          
          // Hide banner for yellow and below
          emergencyBanner.classList.remove('active', 'orange');
          document.body.classList.remove('banner-active');
        } else {
          weatherToggle.classList.remove('warning');
          
          // Hide banner for normal conditions
          emergencyBanner.classList.remove('active', 'orange');
          document.body.classList.remove('banner-active');
          
          // Check if there's any rain first (even if below warning threshold)
          const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
          const rainDayAdvice = getDaySpecificAdvice(dayOfWeek, 'rain');
          
          if (rainfallIntensity >= 5) {
            icon = 'ðŸŒ§ï¸';
            statusText = `Light Rain (${rainfallIntensity.toFixed(1)}mm/h)`;
            suspensionInfo = `<strong>ðŸŒ§ï¸ Light Rain (${currentDay}):</strong><br>
              â€¢ ${isWeekend ? 'No classes - Weekend' : 'Classes proceed normally'}${rainDayAdvice}<br>
              â€¢ ðŸŒ‚ Bring umbrella and raincoat<br>
              â€¢ ðŸ‘Ÿ Wear appropriate footwear<br>
              â€¢ ðŸ’§ Stay dry and avoid getting wet<br>
              â€¢ ðŸ“± Keep valuables protected from water`;
          } else if (rainfallIntensity >= 2) {
            icon = 'ðŸŒ¦ï¸';
            statusText = `Drizzle (${rainfallIntensity.toFixed(1)}mm/h)`;
            suspensionInfo = `<strong>ðŸŒ¦ï¸ Drizzle (${currentDay}):</strong><br>
              â€¢ ${isWeekend ? 'No classes - Weekend' : 'Classes proceed normally'}${rainDayAdvice}<br>
              â€¢ ðŸŒ‚ Bring umbrella just in case<br>
              â€¢ ðŸ‘• Light rain gear recommended<br>
              â€¢ ðŸš¶ Walk carefully on wet surfaces`;
          } else if (rainfallIntensity >= 0.5) {
            icon = 'ðŸŒ¦ï¸';
            statusText = `Very Light Rain (${rainfallIntensity.toFixed(1)}mm/h)`;
            suspensionInfo = `<strong>ðŸŒ¦ï¸ Very Light Rain (${currentDay}):</strong><br>
              â€¢ ${isWeekend ? 'No classes - Weekend' : 'Classes proceed normally'}${rainDayAdvice}<br>
              â€¢ ðŸŒ‚ Umbrella recommended<br>
              â€¢ ðŸ‘Ÿ Watch your step on wet ground`;
          } else if (rainfallIntensity > 0 && rainfallIntensity < 0.5) {
            // Trace rain: measurable but very light (< 0.5mm/h)
            icon = 'â˜ï¸';
            statusText = 'Cloudy with Trace Rain';
            suspensionInfo = `<strong>â˜ï¸ Cloudy with Trace Rain (${currentDay}):</strong><br>
              â€¢ ${isWeekend ? 'No classes - Weekend' : 'Classes proceed normally'}${rainDayAdvice}<br>
              â€¢ ðŸŒ‚ Umbrella optional<br>
              â€¢ ðŸŒ¡ï¸ Comfortable temperature expected${isWeekend || dayOfWeek === 3 ? '' : '<br>â€¢ ðŸ‘• Regular uniform appropriate'}`;
          } else {
            // No rain detected, use weather condition from API
            const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
            // conditionLower already defined at top of function
            
            // Get additional weather indicators for better accuracy
            const cloudCover = data.current.cloud || 0; // Cloud coverage percentage
            const uvIndex = data.current.uv || 0;
            const isDay = data.current.is_day === 1;
            
            // Determine if it's actually sunny despite "Patchy rain" forecast
            // If cloud cover is low (<40%), UV is moderate/high (>3), and it's daytime, it's likely sunny
            const isActuallySunny = isDay && cloudCover < 40 && uvIndex > 3;
            
            // Handle "Patchy rain" or similar conditions when there's no measurable rainfall
            if ((conditionLower.includes('patchy') && conditionLower.includes('rain')) || 
                (conditionLower.includes('possible') && conditionLower.includes('rain'))) {
              
              // If indicators show it's actually sunny, override the patchy rain forecast
              if (isActuallySunny) {
                const dayAdvice = getDaySpecificAdvice(dayOfWeek, 'sunny');
                icon = 'â˜€ï¸';
                statusText = 'Sunny';
                
                suspensionInfo = `<strong>â˜€ï¸ Sunny Weather (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'Great day for learning!'}${heatIndexInfo}<br>
                  â€¢ â˜€ï¸ Wear sun protection if needed<br>
                  â€¢ ðŸ’§ Drink plenty of water<br>
                  â€¢ ðŸ§´ Apply sunscreen for outdoor activities<br>
                  â€¢ ðŸ§¢ Hat recommended for ${isWeekend ? 'outdoor fun' : 'PE class'}${dayAdvice}`;
              } else if (!isDay) {
                // Nighttime with patchy rain forecast but no actual rain
                icon = 'â˜ï¸';
                statusText = 'Cloudy Night';
                const patchyDayAdvice = getDaySpecificAdvice(dayOfWeek);
                suspensionInfo = `<strong>â˜ï¸ Cloudy Night (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'School is closed for the day'}<br>
                  â€¢ ðŸŒ™ Overcast skies tonight<br>
                  â€¢ ðŸŒ‚ Rain possible later<br>
                  â€¢ ðŸ  Stay cozy indoors<br>
                  â€¢ ðŸ˜Š Rest well!`;
              } else {
                // It's genuinely cloudy with possible rain
                icon = 'ðŸŒ¥ï¸';
                statusText = 'Partly Cloudy';
                const patchyDayAdvice = getDaySpecificAdvice(dayOfWeek);
                suspensionInfo = `<strong>ðŸŒ¥ï¸ Partly Cloudy (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'Classes proceed normally'}<br>
                  â€¢ ðŸŒ‚ Bring umbrella as precaution<br>
                  â€¢ â˜ï¸ Rain possible but not currently falling<br>
                  â€¢ ðŸ“± Monitor weather updates${isWeekend || dayOfWeek === 3 ? '' : '<br>â€¢ ðŸ‘• Regular uniform appropriate'}${patchyDayAdvice}`;
              }
            } else if (conditionLower.includes('thunder')) {
              icon = 'â›ˆï¸';
              statusText = condition;
              const thunderDayAdvice = getDaySpecificAdvice(dayOfWeek, 'rain');
              suspensionInfo = `<strong>â›ˆï¸ Thunderstorm Possible (${currentDay}):</strong><br>
                â€¢ ${isWeekend ? 'No classes - Weekend' : 'Stay alert during school hours'}${thunderDayAdvice}<br>
                â€¢ âš¡ Stay indoors during lightning<br>
                â€¢ ðŸŒ‚ Bring umbrella and raincoat<br>
                â€¢ ðŸ“± Monitor weather updates closely<br>
                â€¢ ðŸƒ Seek shelter if thunder is heard<br>
                â€¢ âš ï¸ Avoid open areas and tall objects`;
            } else if (conditionLower.includes('clear') || conditionLower.includes('sunny')) {
              const dayAdvice = getDaySpecificAdvice(dayOfWeek, 'sunny');
              
              if (isDay) {
                // Daytime clear/sunny
                icon = 'â˜€ï¸';
                statusText = condition;
                suspensionInfo = `<strong>â˜€ï¸ Sunny Weather (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'Great day for learning!'}${heatIndexInfo}<br>
                  â€¢ â˜€ï¸ Wear sun protection if needed<br>
                  â€¢ ðŸ’§ Drink plenty of water<br>
                  â€¢ ðŸ§´ Apply sunscreen for outdoor activities<br>
                  â€¢ ðŸ§¢ Hat recommended for ${isWeekend ? 'outdoor fun' : 'PE class'}${dayAdvice}`;
              } else {
                // Nighttime clear
                icon = 'ðŸŒ™';
                statusText = 'Clear Night';
                suspensionInfo = `<strong>ðŸŒ™ Clear Night (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'School is closed for the day'}<br>
                  â€¢ â­ Stars visible tonight<br>
                  â€¢ ðŸŒ¡ï¸ Cool and pleasant evening<br>
                  â€¢ ðŸ  Perfect night for rest<br>
                  â€¢ ðŸ˜Š Have a peaceful evening!`;
              }
            } else if (conditionLower.includes('partly')) {
              const partlyDayAdvice = getDaySpecificAdvice(dayOfWeek, 'sunny');
              
              if (isDay) {
                // Daytime partly cloudy
                icon = 'â›…';
                statusText = condition;
                suspensionInfo = `<strong>â›… Partly Cloudy (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'Perfect weather for classes!'}<br>
                  â€¢ â˜€ï¸ Some sunshine expected<br>
                  â€¢ ðŸŒ‚ Umbrella optional<br>
                  â€¢ ðŸ’§ Stay hydrated${partlyDayAdvice}`;
              } else {
                // Nighttime partly cloudy
                icon = 'â˜ï¸';
                statusText = 'Partly Cloudy Night';
                suspensionInfo = `<strong>â˜ï¸ Partly Cloudy Night (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'School is closed for the day'}<br>
                  â€¢ ðŸŒ™ Some stars may be visible<br>
                  â€¢ ðŸŒ¡ï¸ Mild evening temperature<br>
                  â€¢ ðŸ  Good night for rest<br>
                  â€¢ ðŸ˜Š Sleep well!`;
              }
            } else if (conditionLower.includes('cloudy') || conditionLower.includes('overcast')) {
              const cloudyDayAdvice = getDaySpecificAdvice(dayOfWeek);
              
              if (isDay) {
                // Daytime cloudy
                icon = 'â˜ï¸';
                statusText = condition;
                suspensionInfo = `<strong>â˜ï¸ Cloudy Weather (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'Classes proceed normally'}<br>
                  â€¢ ðŸŒ‚ Bring umbrella (rain possible)<br>
                  â€¢ ðŸŒ¡ï¸ Comfortable temperature expected${isWeekend || dayOfWeek === 3 ? '' : '<br>â€¢ ðŸ‘• Regular uniform appropriate'}${cloudyDayAdvice}`;
              } else {
                // Nighttime cloudy
                icon = 'â˜ï¸';
                statusText = 'Cloudy Night';
                suspensionInfo = `<strong>â˜ï¸ Cloudy Night (${currentDay}):</strong><br>
                  â€¢ ${isWeekend ? 'No classes - Weekend' : 'School is closed for the day'}<br>
                  â€¢ ðŸŒ™ Overcast skies tonight<br>
                  â€¢ ðŸŒ¡ï¸ Mild evening temperature<br>
                  â€¢ ðŸ  Cozy night indoors<br>
                  â€¢ ðŸ˜Š Sleep well!`;
              }
            } else if (conditionLower.includes('mist') || conditionLower.includes('fog')) {
              icon = 'ðŸŒ«ï¸';
              statusText = condition;
              suspensionInfo = `<strong>ðŸŒ«ï¸ Misty/Foggy (${currentDay}):</strong><br>
                â€¢ ${isWeekend ? 'No classes - Weekend' : 'Classes continue as scheduled'}<br>
                â€¢ ðŸ‘€ Reduced visibility - walk carefully<br>
                â€¢ ðŸš¶ Take extra care when crossing<br>
                â€¢ ðŸŒ¡ï¸ May feel cooler than usual`;
            } else {
              icon = 'ðŸŒ¤ï¸';
              statusText = condition;
              suspensionInfo = `<strong>ðŸŒ¤ï¸ Good Weather (${currentDay}):</strong><br>
                â€¢ ${isWeekend ? 'No classes - Enjoy your weekend!' : 'Classes proceed normally'}<br>
                â€¢ ðŸ“š Perfect day for ${isWeekend ? 'relaxing' : 'learning'}<br>
                â€¢ ðŸ’§ Stay hydrated<br>
                â€¢ ðŸ˜Š Have a great ${isWeekend ? 'weekend' : 'day at school'}!`;
            }
          }
          
          // Add humidity and wind info for normal conditions
          statusText += ` â€¢ Humidity: ${humidity}% â€¢ Wind: ${windSpeed.toFixed(1)} km/h`;
        }
        
        // Update UI
        weatherIcon.textContent = icon;
        weatherModalIcon.textContent = icon;
        weatherStatus.textContent = statusText;
        weatherStatus.className = `weather-status ${warningLevel}`;
        
        weatherDescription.textContent = statusText;
        rainfallWarning.textContent = warningText;
        
        // Update suspension notice with dynamic title and styling
        const suspensionNoticeTitle = document.querySelector('#suspensionNotice h4');
        if (suspensionInfo) {
          suspensionNotice.style.display = 'block';
          setSafeHTML(suspensionText, suspensionInfo);
          
          // Change title and styling based on warning level
          if (warningLevel === 'red' || warningLevel === 'orange') {
            suspensionNoticeTitle.textContent = 'âš ï¸ Class Suspension Guidelines';
            suspensionNotice.style.background = 'linear-gradient(135deg, rgba(255, 87, 34, 0.1), rgba(244, 67, 54, 0.1))';
            suspensionNotice.style.borderColor = '#ff5722';
            suspensionNoticeTitle.style.color = '#d32f2f';
          } else if (warningLevel === 'yellow') {
            suspensionNoticeTitle.textContent = 'ðŸŸ¡ Weather Advisory';
            suspensionNotice.style.background = 'linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.1))';
            suspensionNotice.style.borderColor = '#ffc107';
            suspensionNoticeTitle.style.color = '#f57c00';
          } else {
            suspensionNoticeTitle.textContent = 'ðŸ’¡ Weather Advice for Students';
            suspensionNotice.style.background = 'linear-gradient(135deg, rgba(33, 150, 243, 0.05), rgba(3, 169, 244, 0.05))';
            suspensionNotice.style.borderColor = '#2196f3';
            suspensionNoticeTitle.style.color = '#1976d2';
          }
        } else {
          suspensionNotice.style.display = 'none';
        }
        
        // Update timestamp
        const now = new Date();
        weatherUpdateTime.textContent = `Last updated: ${now.toLocaleString('en-PH', { 
          dateStyle: 'medium', 
          timeStyle: 'short',
          timeZone: 'Asia/Manila'
        })}`;
        
        // Update weather background effects
        updateWeatherBackground(statusText, rainfallIntensity, windSpeed);
        
      } catch (error) {
        console.error('Weather fetch error:', error);
        weatherDescription.textContent = 'Unable to fetch weather data. Please try again later.';
        rainfallWarning.textContent = 'Error';
        weatherTemp.textContent = '--Â°C';
        weatherIcon.textContent = 'âŒ';
        weatherModalIcon.textContent = 'âŒ';
      }
    }

    // Function to update weather background effects
    function updateWeatherBackground(condition, rainfall, windSpeed = 0) {
      const weatherBg = document.getElementById('weatherBackground');
      const conditionLower = condition.toLowerCase();
      
      // Clear existing effects
      weatherBg.innerHTML = '';
      weatherBg.classList.remove('active');
      
      // Determine which effect to show
      // Only show rain effects when weather condition actually indicates rain
      const isActuallyRaining = conditionLower.includes('rain') || 
                                conditionLower.includes('drizzle') || 
                                conditionLower.includes('shower') ||
                                conditionLower.includes('sleet');
      
      // Check for windy conditions (>25 km/h is considered windy)
      const isWindy = windSpeed > 25;
      
      if (conditionLower.includes('thunder') || conditionLower.includes('storm')) {
        // Thunderstorm: Rain + Lightning
        createRainEffect(weatherBg, 100, false);
        createLightningEffect(weatherBg);
      } else if ((conditionLower.includes('patchy') && conditionLower.includes('rain')) || 
                 (conditionLower.includes('possible') && conditionLower.includes('rain'))) {
        // Patchy rain: Clouds with very few subtle raindrops (5-8 drops)
        createCloudsEffect(weatherBg, 6);
        createRainEffect(weatherBg, 6, true); // Very few subtle drops
      } else if (conditionLower.includes('trace rain')) {
        // Trace rain: Clouds with 4 tiny raindrops
        createCloudsEffect(weatherBg, 5);
        createRainEffect(weatherBg, 4, true);
      } else if (isActuallyRaining) {
        // Rain effect - intensity based on rainfall (or default if no data)
        let rainDrops = 80; // Default moderate rain
        if (rainfall >= 15) {
          rainDrops = 150; // Heavy rain
        } else if (rainfall >= 7.5) {
          rainDrops = 100; // Moderate to heavy
        } else if (rainfall > 0) {
          rainDrops = 60; // Light rain
        }
        // If rainfall is 0 but weather says it's raining, use default
        createRainEffect(weatherBg, rainDrops, false);
      } else if (conditionLower.includes('sunny') || conditionLower.includes('clear')) {
        // Sunny: Sun rays
        createSunRaysEffect(weatherBg);
      } else if (conditionLower.includes('partly')) {
        // Partly cloudy: Light sun rays + few clouds
        createSunRaysEffect(weatherBg);
        createCloudsEffect(weatherBg, 3);
      } else if (conditionLower.includes('cloudy') || conditionLower.includes('overcast')) {
        // Cloudy: Drifting clouds
        createCloudsEffect(weatherBg, 5);
      } else if (conditionLower.includes('mist') || conditionLower.includes('fog')) {
        // Fog/Mist effect
        createFogEffect(weatherBg);
      }
      
      // Add wind effect if windy (overlays on top of other effects)
      if (isWindy) {
        const windIntensity = windSpeed > 40 ? 'strong' : 'moderate';
        createWindEffect(weatherBg, windIntensity);
      }
      
      // Activate background
      setTimeout(() => {
        weatherBg.classList.add('active');
      }, 100);
    }

    // Create sun rays effect
    function createSunRaysEffect(container) {
      const sunRays = document.createElement('div');
      sunRays.className = 'sun-rays';
      container.appendChild(sunRays);
    }

    // Create rain effect
    function createRainEffect(container, dropCount, isTraceRain = false) {
      const rainContainer = document.createElement('div');
      rainContainer.className = 'rain-container';
      
      for (let i = 0; i < dropCount; i++) {
        const rain = document.createElement('div');
        rain.className = 'rain';
        rain.style.left = Math.random() * 100 + '%';
        
        if (isTraceRain) {
          // Trace rain: tiny, very light, slow-falling drops
          rain.style.width = '1px';
          rain.style.height = (Math.random() * 15 + 10) + 'px'; // 10-25px (shorter)
          rain.style.animationDuration = (Math.random() * 1.5 + 1.5) + 's'; // 1.5-3s (slower)
          rain.style.animationDelay = Math.random() * 5 + 's'; // More spread out
          rain.style.opacity = Math.random() * 0.2 + 0.1; // 0.1-0.3 (very faint)
        } else {
          // Normal rain
          rain.style.animationDuration = (Math.random() * 0.5 + 0.5) + 's';
          rain.style.animationDelay = Math.random() * 2 + 's';
          rain.style.opacity = Math.random() * 0.5 + 0.3;
        }
        
        rainContainer.appendChild(rain);
      }
      
      container.appendChild(rainContainer);
    }

    // Create clouds effect
    function createCloudsEffect(container, cloudCount) {
      const cloudsContainer = document.createElement('div');
      cloudsContainer.className = 'clouds-container';
      
      for (let i = 0; i < cloudCount; i++) {
        const cloud = document.createElement('div');
        cloud.className = 'cloud';
        cloud.style.width = (Math.random() * 100 + 80) + 'px';
        cloud.style.height = (Math.random() * 40 + 40) + 'px';
        cloud.style.top = (Math.random() * 30) + '%';
        cloud.style.animationDuration = (Math.random() * 30 + 40) + 's';
        cloud.style.animationDelay = (Math.random() * 10) + 's';
        cloudsContainer.appendChild(cloud);
      }
      
      container.appendChild(cloudsContainer);
    }

    // Create lightning effect
    function createLightningEffect(container) {
      const lightning = document.createElement('div');
      lightning.className = 'lightning';
      container.appendChild(lightning);
    }

    // Create fog effect
    function createFogEffect(container) {
      const fog1 = document.createElement('div');
      fog1.className = 'fog';
      fog1.style.animationDuration = '20s';
      
      const fog2 = document.createElement('div');
      fog2.className = 'fog';
      fog2.style.animationDuration = '25s';
      fog2.style.animationDelay = '10s';
      fog2.style.opacity = '0.5';
      
      container.appendChild(fog1);
      container.appendChild(fog2);
    }

    // Create wind effect
    function createWindEffect(container, intensity = 'moderate') {
      const windContainer = document.createElement('div');
      windContainer.className = 'wind-container';
      
      // Number of wind lines based on intensity
      const windLines = intensity === 'strong' ? 20 : 12;
      
      for (let i = 0; i < windLines; i++) {
        const windLine = document.createElement('div');
        windLine.className = 'wind-line';
        windLine.style.top = Math.random() * 100 + '%';
        windLine.style.animationDuration = (Math.random() * 1 + (intensity === 'strong' ? 0.5 : 1)) + 's';
        windLine.style.animationDelay = Math.random() * 3 + 's';
        windLine.style.opacity = Math.random() * 0.3 + 0.1;
        
        // Vary the length
        const length = intensity === 'strong' ? Math.random() * 80 + 60 : Math.random() * 60 + 40;
        windLine.style.width = length + 'px';
        
        windContainer.appendChild(windLine);
      }
      
      container.appendChild(windContainer);
    }

    // Auto-update weather every 3 minutes for better accuracy
    setInterval(updateWeatherInfo, 180000);
    
    // Initial weather check (silent, in background)
    updateWeatherInfo();

    // Scroll animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animated');
        }
      });
    }, observerOptions);

    document.querySelectorAll('.animate-on-scroll').forEach(el => {
      observer.observe(el);
    });

    // Smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Chatbot functionality
    const chatbotToggle = document.getElementById('chatbotToggle');
    const chatbotWindow = document.getElementById('chatbotWindow');
    const chatbotMessages = document.getElementById('chatbotMessages');
    const chatbotInput = document.getElementById('chatbotInput');
    const chatbotSend = document.getElementById('chatbotSend');

    // Null check for chatbot elements
    if (!chatbotToggle || !chatbotWindow || !chatbotMessages || !chatbotInput || !chatbotSend) {
      console.warn('Chatbot: One or more required elements not found. Chatbot disabled.');
    }

    // Toggle chatbot window
    if (chatbotToggle && chatbotWindow && chatbotInput) {
      chatbotToggle.addEventListener('click', () => {
        chatbotWindow.classList.toggle('active');
        chatbotToggle.classList.toggle('active');
        if (chatbotWindow.classList.contains('active')) {
          chatbotInput.focus();
        }
      });
    }

    // Knowledge base for the chatbot
    const knowledgeBase = {
      'programs': {
        keywords: ['program', 'course', 'track', 'strand', 'offer', 'available', 'study'],
        response: 'We offer two main tracks:\n\nðŸ“š <strong>Academic Track</strong>: ABM (Accountancy, Business & Management) and HUMSS (Humanities & Social Sciences)\n\nðŸ”§ <strong>Technical-Vocational Track</strong>: EIM (Electrical Installation & Maintenance), CSS (Computer Systems Servicing), and Home Economics'
      },
      'enrollment': {
        keywords: ['enroll', 'admission', 'apply', 'register', 'join', 'requirements'],
        response: 'To enroll at BSHS, click the "Enroll Now" button on our homepage. You\'ll need:\n\nâ€¢ Form 138 (Report Card)\nâ€¢ Birth Certificate\nâ€¢ Good Moral Certificate\nâ€¢ 2x2 ID Photos\n\nFor more details, please visit our enrollment page or contact our registrar.'
      },
      'contact': {
        keywords: ['contact', 'phone', 'email', 'address', 'reach', 'call'],
        response: 'You can reach us at:\n\nðŸ“ <strong>Address:</strong> Balangkayan, Eastern Samar\nðŸ“ž <strong>Phone:</strong> Contact our main office\nðŸ“§ <strong>Email:</strong> Available on our contact page\n\nFeel free to visit us during office hours!'
      },
      'location': {
        keywords: ['location', 'where', 'map', 'direction', 'find', 'navigate'],
        response: 'MAP_WIDGET',
        action: 'showMap'
      },
      'mission': {
        keywords: ['mission', 'vision', 'goal', 'objective', 'purpose'],
        response: '<strong>Our Vision:</strong> We dream of Filipinos who passionately love their country and whose values and competencies enable them to realize their full potential.\n\n<strong>Our Mission:</strong> To protect and promote the right of every Filipino to quality, equitable, culture-based and complete basic education.'
      },
      'schedule': {
        keywords: ['schedule', 'time', 'hours', 'when', 'open', 'class'],
        response: 'Our school operates on a regular schedule:\n\nâ° <strong>Class Hours:</strong> Monday to Friday\nðŸ“… <strong>School Year:</strong> June to March\n\nFor specific class schedules, please contact your program coordinator after enrollment.'
      },
      'facilities': {
        keywords: ['facility', 'facilities', 'building', 'laboratory', 'library', 'campus'],
        response: 'BSHS features modern facilities including:\n\nâ€¢ Computer laboratories\nâ€¢ Science laboratories\nâ€¢ Library and learning resource center\nâ€¢ Technical-vocational workshops\nâ€¢ Sports facilities\n\nWe continuously upgrade our facilities to provide the best learning environment!'
      },
      'easteregg': {
        keywords: ['easter egg', 'easteregg', 'secret', 'hidden feature', 'logo trick', 'bouncing logo'],
        response: 'ðŸŽ‰ <strong>BSHS Logo Easter Egg!</strong>\n\nWant to see something fun? Here\'s how to activate the hidden bouncing logo animation:\n\n<strong>Steps:</strong>\n1ï¸âƒ£ Find the BSHS logo in the header (top-left corner)\n2ï¸âƒ£ Click the logo <strong>3 times quickly</strong> (triple-click)\n3ï¸âƒ£ Watch the magic happen! ðŸŽ¨âœ¨\n\nThe logo will start bouncing around your screen with rainbow colors!\n\n<strong>To deactivate:</strong>\nSimply triple-click the header logo again.\n\nTry it now and enjoy the show! ðŸŒˆ'
      },
      'weather': {
        keywords: ['weather', 'rain', 'rainfall', 'forecast', 'climate', 'temperature', 'suspension', 'class suspension', 'cancel', 'typhoon', 'storm'],
        response: 'WEATHER_WIDGET',
        action: 'showWeather'
      },
      'schoolid': {
        keywords: ['school id', 'id card', 'identification', 'id release', 'ready id', 'claim id', 'ict club', 'id ready', 'my id'],
        response: 'SCHOOL_ID_LIST',
        action: 'showSchoolIDs'
      }
    };

    // Function to find best response
    function getBotResponse(userMessage) {
      const message = userMessage.toLowerCase();
      
      // Check for greetings
      if (message.match(/\b(hi|hello|hey|good morning|good afternoon|good evening)\b/)) {
        return 'Hello! Welcome to Balangkayan Senior High School. How can I assist you today? ðŸ˜Š';
      }

      // Check for thanks
      if (message.match(/\b(thank|thanks|thank you|ty)\b/)) {
        return 'You\'re welcome! If you have any other questions, feel free to ask. Happy to help! ðŸ˜Š';
      }

      // Check for goodbye
      if (message.match(/\b(bye|goodbye|see you|later)\b/)) {
        return 'Goodbye! Have a great day! Feel free to come back if you have more questions. ðŸ‘‹';
      }

      // Check for ICT section scroll request
      if (message.match(/\b(yes|show|ict section|ict club section|take me|go to ict)\b/)) {
        setTimeout(() => {
          const chatbotWindow = document.getElementById('chatbotWindow');
          const chatbotToggle = document.getElementById('chatbotToggle');
          if (chatbotWindow) chatbotWindow.classList.remove('active');
          if (chatbotToggle) chatbotToggle.classList.remove('active');
          
          const ictSection = document.getElementById('ict-club');
          if (ictSection) {
            ictSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
        }, 1000);
        return 'Taking you to the ICT Club section now! ðŸŽ¯';
      }

      // Search knowledge base
      for (const [key, value] of Object.entries(knowledgeBase)) {
        for (const keyword of value.keywords) {
          if (message.includes(keyword)) {
            return { response: value.response, action: value.action };
          }
        }
      }

      // Default response
      return { response: 'I\'m here to help! You can ask me about:\n\nâ€¢ Our programs and tracks\nâ€¢ Enrollment process\nâ€¢ Contact information\nâ€¢ Mission and vision\nâ€¢ School facilities\nâ€¢ School location (map)\nâ€¢ Weather and rainfall warnings\nâ€¢ Class suspension updates\nâ€¢ School ID ready for release\n\nWhat would you like to know?' };
    }

    // Function to add message to chat
    function addMessage(text, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${isUser ? 'user' : ''}`;
      
      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.textContent = isUser ? 'ðŸ‘¤' : 'ðŸ¤–';
      
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      setSafeHTML(bubble, text);
      
      messageDiv.appendChild(avatar);
      messageDiv.appendChild(bubble);
      
      chatbotMessages.appendChild(messageDiv);
      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    // Function to show typing indicator
    function showTypingIndicator() {
      const typingDiv = document.createElement('div');
      typingDiv.className = 'message';
      typingDiv.id = 'typingIndicator';
      
      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.textContent = 'ðŸ¤–';
      
      const indicator = document.createElement('div');
      indicator.className = 'typing-indicator';
      indicator.innerHTML = '<span></span><span></span><span></span>';
      
      typingDiv.appendChild(avatar);
      typingDiv.appendChild(indicator);
      chatbotMessages.appendChild(typingDiv);
      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    // Function to remove typing indicator
    function removeTypingIndicator() {
      const indicator = document.getElementById('typingIndicator');
      if (indicator) {
        indicator.remove();
      }
    }

    // Function to send message
    function sendMessage() {
      const message = chatbotInput.value.trim();
      if (!message) return;
      
      // Input validation: limit message length to prevent abuse
      if (message.length > 500) {
        addMessage('âš ï¸ Message too long. Please keep your message under 500 characters.', false);
        return;
      }
      
      // Sanitize user input before displaying
      const sanitizedMessage = sanitizeHTML(message);

      // Add user message (sanitized)
      addMessage(sanitizedMessage, true);
      chatbotInput.value = '';

      // Show typing indicator
      showTypingIndicator();

      // Simulate bot thinking time
      setTimeout(async () => {
        removeTypingIndicator();
        const result = getBotResponse(message);
        const response = typeof result === 'object' ? result.response : result;
        const action = typeof result === 'object' ? result.action : null;
        
        if (response === 'MAP_WIDGET') {
          addMessage('Here\'s our school location on the map! ðŸ“\n\n<strong>Balangkayan Senior High School</strong>\nBalangkayan, Eastern Samar\n\nCoordinates: 11.477476, 125.506518\n\nYou can also scroll down to the "Find Us" section on our homepage to see the interactive map!');
          
          // Scroll to map section
          setTimeout(() => {
            chatbotWindow.classList.remove('active');
            chatbotToggle.classList.remove('active');
            const mapSection = document.getElementById('location');
            if (mapSection) {
              mapSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
          }, 1500);
        } else if (response === 'WEATHER_WIDGET') {
          // Get current weather data
          if (!currentWeatherData) {
            await updateWeatherInfo();
          }
          
          // Format weather response
          let weatherResponse = 'ðŸŒ¤ï¸ <strong>Current Weather in Balangkayan, Eastern Samar</strong>\n\n';
          
          if (currentWeatherData) {
            // WeatherAPI.com data structure
            const temp = currentWeatherData.current.temp_c;
            const humidity = currentWeatherData.current.humidity || 0;
            const windSpeed = currentWeatherData.current.wind_kph || 0;
            const condition = currentWeatherData.current.condition.text;
            
            // Use centralized rainfall calculation
            const rainfallIntensity = calculateRainfallIntensity(currentWeatherData);
            const isRaining = rainfallIntensity >= 0.5;
            
            weatherResponse += `ðŸŒ¡ï¸ <strong>Temperature:</strong> ${temp}Â°C\n`;
            weatherResponse += `â˜ï¸ <strong>Condition:</strong> ${condition}\n`;
            weatherResponse += `ðŸ’§ <strong>Humidity:</strong> ${humidity}%\n`;
            weatherResponse += `ðŸ’¨ <strong>Wind Speed:</strong> ${windSpeed.toFixed(1)} km/h\n`;
            weatherResponse += `ðŸŒ§ï¸ <strong>Rainfall:</strong> ${rainfallIntensity.toFixed(1)} mm/h\n\n`;
            
            // Check rainfall warning levels
            if (rainfallIntensity >= 30) {
              weatherResponse += 'ðŸ”´ <strong>RED RAINFALL WARNING</strong>\n\n';
              weatherResponse += 'âš ï¸ <strong>AUTOMATIC CLASS SUSPENSION</strong>\n';
              weatherResponse += 'â€¢ All levels suspended (Pre-school to Senior High)\n';
              weatherResponse += 'â€¢ Stay indoors and safe\n';
              weatherResponse += 'â€¢ Monitor official DepEd announcements\n\n';
            } else if (rainfallIntensity >= 15) {
              weatherResponse += 'ðŸŸ  <strong>ORANGE RAINFALL WARNING</strong>\n\n';
              weatherResponse += 'âš ï¸ <strong>POSSIBLE CLASS SUSPENSION</strong>\n';
              weatherResponse += 'â€¢ Pre-school, Elementary, Junior High may be suspended\n';
              weatherResponse += 'â€¢ Senior High may continue with caution\n';
              weatherResponse += 'â€¢ Monitor announcements from DepEd\n\n';
            } else if (rainfallIntensity >= 7.5) {
              weatherResponse += 'ðŸŸ¡ <strong>YELLOW RAINFALL WARNING</strong>\n\n';
              weatherResponse += 'â€¢ Classes continue as normal\n';
              weatherResponse += 'â€¢ Bring umbrellas and rain gear\n';
              weatherResponse += 'â€¢ Be prepared for weather changes\n\n';
            } else {
              weatherResponse += 'âœ… <strong>Normal Weather Conditions</strong>\n\n';
              weatherResponse += 'â€¢ No rainfall warnings\n';
              weatherResponse += 'â€¢ Classes proceed as scheduled\n\n';
            }
            
            weatherResponse += '<em>Based on DepEd Order No. 022, s. 2024</em>\n\n';
            weatherResponse += 'âš ï¸ <strong>IMPORTANT:</strong> This is automated data. For official warnings, always check <strong>PAGASA, NDRRMC, and DepEd announcements</strong>.\n\n';
            weatherResponse += 'Click the weather button (ðŸŒ¤ï¸) in the navigation to see detailed information!';
          } else {
            weatherResponse += 'Unable to fetch weather data at the moment. Please try again or click the weather button in the navigation bar.';
          }
          
          addMessage(weatherResponse);
        } else if (response === 'SCHOOL_ID_LIST') {
          // Generate school ID response
          let idResponse = 'ðŸ†” <strong>ICT Club - School ID Ready for Release</strong>\n\n';
          
          if (readyForReleaseIDs.length === 0) {
            idResponse += 'ðŸ“­ <strong>No IDs ready for release at the moment.</strong>\n\n';
            idResponse += 'Please check back later for updates!\n\n';
            idResponse += 'You can also scroll down to the ICT Club section on our homepage for the latest information.';
          } else {
            idResponse += 'âœ… <strong>The following Student IDs are ready for claiming:</strong>\n\n';
            
            readyForReleaseIDs.forEach((id, index) => {
              idResponse += `${index + 1}. <strong>${id}</strong>\n`;
            });
            
            idResponse += '\nðŸ“ <strong>Where to claim:</strong> ICT Laboratory\n';
            idResponse += 'â° <strong>Office Hours:</strong> Monday - Friday, 8:00 AM - 4:00 PM\n';
            idResponse += 'ðŸ’¡ <strong>Reminder:</strong> Please verify your identity when claiming your School ID.\n\n';
            idResponse += 'You can also scroll down to the ICT Club section on our homepage to see the full list!';
          }
          
          addMessage(idResponse);
          
          // Optionally scroll to ICT Club section after a delay
          setTimeout(() => {
            const ictSection = document.getElementById('ict-club');
            if (ictSection && readyForReleaseIDs.length > 0) {
              // Ask if they want to see the section
              addMessage('Would you like me to take you to the ICT Club section to see more details? Just say "yes" or "show ict section"! ðŸ˜Š');
            }
          }, 1500);
        } else {
          addMessage(response);
        }
      }, 800 + Math.random() * 700);
    }

    // Function to send quick reply
    function sendQuickReply(message) {
      // Quick replies just call sendMessage with the message
      chatbotInput.value = message;
      sendMessage();
    }

    // Event listeners
    if (chatbotSend) {
      chatbotSend.addEventListener('click', sendMessage);
    }
    if (chatbotInput) {
      chatbotInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
    }

    // Make sendQuickReply available globally
    window.sendQuickReply = sendQuickReply;

    // Initialize map
    function initMap() {
      // School coordinates
      const schoolLocation = [11.477476, 125.506518];
      
      // Create map
      const map = L.map('schoolMap').setView(schoolLocation, 16);
      
      // Add OpenStreetMap tiles
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 19
      }).addTo(map);
      
      // Custom marker icon
      const schoolIcon = L.divIcon({
        className: 'custom-marker',
        html: '<div style="background: linear-gradient(135deg, #ff7b00, #ff5722); width: 40px; height: 40px; border-radius: 50% 50% 50% 0; transform: rotate(-45deg); display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(255, 123, 0, 0.5); border: 3px solid white;"><span style="transform: rotate(45deg); font-size: 20px;">ðŸ«</span></div>',
        iconSize: [40, 40],
        iconAnchor: [20, 40]
      });
      
      // Add marker
      const marker = L.marker(schoolLocation, { icon: schoolIcon }).addTo(map);
      
      // Add popup
      marker.bindPopup(`
        <div style="text-align: center; padding: 10px; font-family: 'Poppins', sans-serif;">
          <strong style="font-size: 1.1em; color: #ff7b00;">Balangkayan Senior High School</strong><br>
          <span style="color: #6c757d; font-size: 0.9em;">Stand Alone</span><br>
          <span style="color: #1a1a2e; margin-top: 8px; display: block;">ðŸ“ Balangkayan, Eastern Samar</span>
          <a href="https://www.google.com/maps/dir/?api=1&destination=11.477476,125.506518" target="_blank" rel="noopener noreferrer" style="display: inline-block; margin-top: 10px; padding: 8px 16px; background: linear-gradient(135deg, #ff7b00, #ff5722); color: white; text-decoration: none; border-radius: 20px; font-size: 0.85em; font-weight: 600;">Get Directions</a>
        </div>
      `).openPopup();
      
      // Add circle to highlight area
      L.circle(schoolLocation, {
        color: '#ff7b00',
        fillColor: '#FCF259',
        fillOpacity: 0.2,
        radius: 100
      }).addTo(map);
    }

    // Initialize map when page loads
    window.addEventListener('load', initMap);

    // ===== PROGRAM CARDS TOGGLE =====
    function toggleProgramCard(card) {
      card.classList.toggle('flipped');
    }
    
    // Add event listeners to program cards
    document.querySelectorAll('.program-card').forEach(card => {
      card.addEventListener('click', function() {
        toggleProgramCard(this);
      });
      
      // Back button handler
      const backButton = card.querySelector('.back-button');
      if (backButton) {
        backButton.addEventListener('click', function(e) {
          e.stopPropagation();
          toggleProgramCard(card);
        });
      }
    });
    
    // Add event listener to enroll button
    const enrollBtn = document.querySelector('.enroll-btn');
    if (enrollBtn) {
      enrollBtn.addEventListener('click', function() {
        window.location.href = 'step1.html';
      });
    }
    
    // Add event listeners to quick reply buttons
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('quick-reply')) {
        const message = e.target.getAttribute('data-reply');
        if (message) {
          sendQuickReply(message);
        }
      }
    });

    // ===== FIREWORKS CLICK EFFECT =====
    (function() {
      // Create canvas
      const canvas = document.createElement('canvas');
      canvas.style.position = 'fixed';
      canvas.style.top = '0';
      canvas.style.left = '0';
      canvas.style.width = '100%';
      canvas.style.height = '100%';
      canvas.style.pointerEvents = 'none';
      canvas.style.zIndex = '9998';
      document.body.appendChild(canvas);
      
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      
      window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
      
      // Particle class
      class Particle {
        constructor(x, y, color) {
          this.x = x;
          this.y = y;
          this.color = color;
          this.velocity = {
            x: (Math.random() - 0.5) * 8,
            y: (Math.random() - 0.5) * 8
          };
          this.radius = Math.random() * 3 + 2;
          this.alpha = 1;
          this.decay = Math.random() * 0.015 + 0.015;
          this.gravity = 0.15;
        }
        
        draw() {
          ctx.save();
          ctx.globalAlpha = this.alpha;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
          ctx.closePath();
          ctx.restore();
        }
        
        update() {
          this.velocity.y += this.gravity;
          this.x += this.velocity.x;
          this.y += this.velocity.y;
          this.alpha -= this.decay;
          this.draw();
        }
      }
      
      // Firework class
      class Firework {
        constructor(x, y) {
          this.x = x;
          this.y = y;
          this.particles = [];
          this.colors = [
            '#ff7b00', '#FCF259', '#ff5722', '#B4E50D', '#4a90e2',
            '#ff1744', '#00e676', '#ffea00', '#ff6f00', '#e91e63'
          ];
          
          const particleCount = Math.random() * 30 + 50;
          for (let i = 0; i < particleCount; i++) {
            const color = this.colors[Math.floor(Math.random() * this.colors.length)];
            this.particles.push(new Particle(x, y, color));
          }
        }
        
        update() {
          for (let i = this.particles.length - 1; i >= 0; i--) {
            this.particles[i].update();
            if (this.particles[i].alpha <= 0) {
              this.particles.splice(i, 1);
            }
          }
        }
        
        isDead() {
          return this.particles.length === 0;
        }
      }
      
      let fireworks = [];
      
      // Animation loop
      function animate() {
        requestAnimationFrame(animate);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        for (let i = fireworks.length - 1; i >= 0; i--) {
          fireworks[i].update();
          if (fireworks[i].isDead()) {
            fireworks.splice(i, 1);
          }
        }
      }
      
      animate();
      
      // Click event
      document.addEventListener('click', (e) => {
        fireworks.push(new Firework(e.clientX, e.clientY));
      });
    })();

    // ===== BOUNCING LOGO ANIMATION (HIDDEN EASTER EGG) =====
    const runningStudent = document.querySelector('.running-student');
    const headerLogo = document.querySelector('header .logo img');
    let x = 0;
    let y = 0;
    let speedX = 4;
    let speedY = 3.5;
    let isPaused = false;
    let isActive = false;
    let animationId = null;

    // Function to get header logo position
    function getHeaderLogoPosition() {
      const rect = headerLogo.getBoundingClientRect();
      return {
        x: rect.left + (rect.width / 2) - 40, // Center the bouncing logo
        y: rect.top + (rect.height / 2) - 40
      };
    }

    function bounceLogo() {
      if (isPaused || !isActive) return;

      // Update position
      x += speedX;
      y += speedY;

      // Bounce off edges with slight randomization
      if (x <= 0 || x >= window.innerWidth - 80) {
        speedX = -speedX;
        // Add slight variation to prevent predictable bouncing
        speedY += (Math.random() - 0.5) * 0.5;
        changeColor();
      }
      if (y <= 0 || y >= window.innerHeight - 80) {
        speedY = -speedY;
        // Add slight variation to prevent predictable bouncing
        speedX += (Math.random() - 0.5) * 0.5;
        changeColor();
      }

      // Keep speeds within reasonable bounds
      speedX = Math.max(-6, Math.min(6, speedX));
      speedY = Math.max(-6, Math.min(6, speedY));

      // Apply position
      runningStudent.style.left = x + 'px';
      runningStudent.style.top = y + 'px';

      animationId = requestAnimationFrame(bounceLogo);
    }

    function changeColor() {
      const colors = [
        'rgba(252, 242, 89, 0.8)',
        'rgba(180, 229, 13, 0.8)',
        'rgba(255, 123, 0, 0.8)',
        'rgba(255, 87, 34, 0.8)',
        'rgba(74, 144, 226, 0.8)',
        'rgba(236, 72, 153, 0.8)',
        'rgba(168, 85, 247, 0.8)',
        'rgba(34, 197, 94, 0.8)'
      ];
      const randomColor = colors[Math.floor(Math.random() * colors.length)];
      runningStudent.style.boxShadow = `0 6px 30px ${randomColor}, 0 0 15px ${randomColor}`;
    }

    // Easter Egg: Click header logo to activate bouncing animation
    let clickCount = 0;
    let clickTimer = null;

    headerLogo.addEventListener('click', (e) => {
      e.preventDefault();
      clickCount++;

      // Clear previous timer
      if (clickTimer) clearTimeout(clickTimer);

      // Triple click to activate
      if (clickCount === 3) {
        if (!isActive) {
          // Get starting position from header logo
          const startPos = getHeaderLogoPosition();
          x = startPos.x;
          y = startPos.y;
          
          // Set initial position
          runningStudent.style.left = x + 'px';
          runningStudent.style.top = y + 'px';
          
          // Activate bouncing logo
          isActive = true;
          runningStudent.classList.add('active');
          
          // Random initial direction
          speedX = Math.random() > 0.5 ? 2 : -2;
          speedY = Math.random() > 0.5 ? 2 : -2;
          
          bounceLogo();

          // Show activation message
          const msgEl = document.createElement('div');
          msgEl.textContent = 'ðŸŽ‰ Easter Egg Activated! BSHS Logo is on the move!';
          msgEl.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--primary);
            color: var(--text-dark);
            padding: 20px 40px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.3em;
            z-index: 10001;
            animation: fadeOut 3s ease forwards;
            box-shadow: 0 8px 30px rgba(252, 242, 89, 0.8);
            border: 3px solid var(--button);
            text-align: center;
          `;
          document.body.appendChild(msgEl);
          setTimeout(() => msgEl.remove(), 3000);
        } else {
          // Deactivate bouncing logo
          isActive = false;
          runningStudent.classList.remove('active');
          if (animationId) cancelAnimationFrame(animationId);

          // Show deactivation message
          const msgEl = document.createElement('div');
          msgEl.textContent = 'ðŸ‘‹ Easter Egg Deactivated!';
          msgEl.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--primary);
            color: var(--text-dark);
            padding: 20px 40px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 1.3em;
            z-index: 10001;
            animation: fadeOut 2s ease forwards;
            box-shadow: 0 8px 30px rgba(252, 242, 89, 0.8);
            border: 3px solid var(--button);
          `;
          document.body.appendChild(msgEl);
          setTimeout(() => msgEl.remove(), 2000);
        }
        clickCount = 0;
      }

      // Reset click count after 1 second
      clickTimer = setTimeout(() => {
        clickCount = 0;
      }, 1000);
    });

    // Pause on hover
    runningStudent.addEventListener('mouseenter', () => {
      isPaused = true;
    });

    runningStudent.addEventListener('mouseleave', () => {
      isPaused = false;
      bounceLogo();
    });

    // Click interaction
    runningStudent.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent fireworks on student click
      
      // Speed up
      speedX = speedX > 0 ? speedX + 1 : speedX - 1;
      speedY = speedY > 0 ? speedY + 1 : speedY - 1;
      
      // Max speed limit
      speedX = Math.max(-8, Math.min(8, speedX));
      speedY = Math.max(-8, Math.min(8, speedY));
      
      // Show message
      const messages = [
        "Go BSHS! ðŸŽ“",
        "Faster! ðŸš€",
        "BSHS Pride! ðŸ’›",
        "Never give up! ðŸ’ª",
        "Excellence in Education! â­",
        "Building Bright Futures! âœ¨",
        "Bouncing with Pride! ðŸŽ¯"
      ];
      const msg = messages[Math.floor(Math.random() * messages.length)];
      
      // Create temporary message
      const msgEl = document.createElement('div');
      msgEl.textContent = msg;
      msgEl.style.cssText = `
        position: fixed;
        top: ${y - 60}px;
        left: ${x + 40}px;
        transform: translateX(-50%);
        background: var(--primary);
        color: var(--text-dark);
        padding: 12px 24px;
        border-radius: 25px;
        font-weight: 700;
        font-size: 1.1em;
        z-index: 10000;
        animation: fadeOut 2s ease forwards;
        box-shadow: 0 4px 20px rgba(252, 242, 89, 0.6);
        border: 2px solid var(--button);
      `;
      document.body.appendChild(msgEl);
      setTimeout(() => msgEl.remove(), 2000);
      
      // Reset speed after 5 seconds
      setTimeout(() => {
        speedX = speedX > 0 ? 2 : -2;
        speedY = speedY > 0 ? 2 : -2;
      }, 5000);
    });

    // Handle window resize
    window.addEventListener('resize', () => {
      x = Math.min(x, window.innerWidth - 80);
      y = Math.min(y, window.innerHeight - 80);
    });
  </script>
  
  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  
  <!-- Initialize Swiper -->
  <script>
    // ===== AI AUTO-ANNOUNCEMENT GENERATOR =====
    // This function automatically generates daily announcements based on the day of the week and weather
    
    async function getWeatherCondition() {
      try {
        // Use centralized fetch with caching
        const data = await fetchWeatherData();
        
        // Get weather condition
        const condition = data.current.condition.text.toLowerCase();
        
        // Use centralized rainfall calculation
        const rainfallIntensity = calculateRainfallIntensity(data);
        
        // Determine if it's rainy based on measurable rainfall
        const isRainy = rainfallIntensity >= 0.5;
        
        // Determine if it's sunny
        const isSunny = condition.includes('sunny') || condition.includes('clear');
        
        return {
          isRainy: isRainy,
          isSunny: isSunny,
          rainfallIntensity: rainfallIntensity,
          condition: condition
        };
      } catch (error) {
        console.error('Weather condition fetch error:', error);
        // Return null values to indicate error instead of misleading defaults
        return { 
          isRainy: false, 
          isSunny: false, 
          rainfallIntensity: 0, 
          condition: 'unavailable',
          error: true 
        };
      }
    }
    
    function getDayName(dayIndex) {
      const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
      return days[dayIndex];
    }
    
    function formatDate(date) {
      const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      return `${months[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;
    }
    
    function getTimeBasedGreeting() {
      const hour = new Date().getHours();
      
      if (hour >= 5 && hour < 12) {
        return { greeting: 'Good morning', icon: 'ðŸŒ…', period: 'morning' };
      } else if (hour >= 12 && hour < 17) {
        return { greeting: 'Good afternoon', icon: 'â˜€ï¸', period: 'afternoon' };
      } else if (hour >= 17 && hour < 21) {
        return { greeting: 'Good evening', icon: 'ðŸŒ†', period: 'evening' };
      } else {
        return { greeting: 'Good evening', icon: 'ðŸŒ™', period: 'night' };
      }
    }
    
    async function generateDailyReminder() {
      const now = new Date();
      const dayOfWeek = now.getDay(); // 0 = Sunday, 1 = Monday, etc.
      const currentHour = now.getHours();
      const timeGreeting = getTimeBasedGreeting();
      const weather = await getWeatherCondition();
      const container = document.getElementById('daily-reminder-container');
      
      if (!container) return;
      
      // Clear existing reminder
      container.innerHTML = '';
      
      let reminder = null;
      
      // Check if school is closed (after 5 PM on weekdays)
      const isWeekday = dayOfWeek >= 1 && dayOfWeek <= 5;
      if (isWeekday && currentHour >= 17) {
        const nextDay = dayOfWeek === 5 ? 'Monday' : 'tomorrow';
        reminder = {
          icon: 'ðŸŒ™',
          title: 'School is Closed',
          content: `The school day has ended. Our school is now closed for the day. Thank you for another great day at BSHS!`,
          details: [
            { label: 'â° School Hours', value: 'Monday - Friday, 7:00 AM - 5:00 PM' },
            { label: 'ðŸ‘‹ See You', value: `See you ${nextDay}!` },
            { label: 'ðŸ  Reminder', value: 'Get home safely and rest well' },
            { label: 'ðŸ“š Tomorrow', value: 'Come prepared for another productive day' }
          ]
        };
      }
      
      // Generate reminder based on day of week (only if not after hours)
      if (!reminder) {
        switch(dayOfWeek) {
        case 1: // Monday
          // Flag ceremony announcement - check rainfall intensity for accurate status
          const rainfall = weather.rainfallIntensity || 0;
          
          if (rainfall >= 7.5) {
            // Heavy rain - ceremony cancelled
            reminder = {
              icon: 'ðŸŒ§ï¸',
              title: 'No Flag Ceremony Today',
              content: `${timeGreeting.greeting}, students! Due to heavy rainfall, there will be <strong>NO Flag Ceremony</strong> today. Stay safe and dry!`,
              details: [
                { label: 'ðŸŒ§ï¸ Weather', value: `Heavy rain (${rainfall.toFixed(1)}mm/h)` },
                { label: 'ðŸ‘” Dress Code', value: 'Complete uniform still required' },
                { label: 'ðŸ†” Requirement', value: 'School ID is strictly required' },
                { label: 'â˜‚ï¸ Reminder', value: 'Bring your umbrella and raincoat' }
              ]
            };
          } else if (rainfall >= 0.5) {
            // Light rain - ceremony may be cancelled
            reminder = {
              icon: 'ðŸ‡µðŸ‡­',
              title: 'Flag Ceremony May Be Cancelled',
              content: `${timeGreeting.greeting}, students! Due to light rain, the <strong>Flag Ceremony may be cancelled</strong>. Please bring your umbrella and wait for announcements.`,
              details: [
                { label: 'ðŸŒ¦ï¸ Weather', value: `Light rain (${rainfall.toFixed(1)}mm/h)` },
                { label: 'â° Time', value: '7:15 AM - Check for updates' },
                { label: 'ðŸ‘” Dress Code', value: 'Complete uniform required' },
                { label: 'â˜‚ï¸ Reminder', value: 'Bring umbrella just in case' }
              ]
            };
          } else if (weather.isSunny) {
            // Sunny - ceremony will proceed
            reminder = {
              icon: 'ðŸ‡µðŸ‡­',
              title: 'Flag Ceremony Today',
              content: `${timeGreeting.greeting}, students! There will be a <strong>Flag Ceremony</strong> today. Let's show our respect to our national flag and start the week with pride!`,
              details: [
                { label: 'â° Time', value: '7:15 AM sharp' },
                { label: 'â˜€ï¸ Weather', value: 'Sunny - Ceremony will proceed' },
                { label: 'ðŸ‘” Dress Code', value: 'Complete uniform required' },
                { label: 'ðŸ†” Requirement', value: 'School ID is strictly required' }
              ]
            };
          } else {
            // Cloudy/other - ceremony will proceed
            reminder = {
              icon: 'ðŸ‡µðŸ‡­',
              title: 'Flag Ceremony Today',
              content: `${timeGreeting.greeting}, students! There will be a <strong>Flag Ceremony</strong> today. Let's show our respect to our national flag and start the week with pride!`,
              details: [
                { label: 'â° Time', value: '7:15 AM sharp' },
                { label: 'â˜ï¸ Weather', value: `${weather.condition || 'Good conditions'} - Ceremony will proceed` },
                { label: 'ðŸ‘” Dress Code', value: 'Complete uniform required' },
                { label: 'ðŸ†” Requirement', value: 'School ID is strictly required' }
              ]
            };
          }
          break;
          
        case 2: // Tuesday
          reminder = {
            icon: 'ðŸ“š',
            title: 'Tuesday - Regular School Day',
            content: `${timeGreeting.greeting}, students! Let's make today productive and focused. Have a great Tuesday!`,
            details: [
              { label: 'ðŸ‘” Dress Code', value: 'Complete school uniform' },
              { label: 'ðŸ†” Requirement', value: 'School ID is strictly required' },
              { label: 'ðŸ“– Reminder', value: 'Come prepared for classes' }
            ]
          };
          break;
          
        case 3: // Wednesday
          reminder = {
            icon: 'ðŸ‘•',
            title: 'Wash Day - Civilian Attire',
            content: `${timeGreeting.greeting}, students! Today is <strong>Wash Day</strong> - you may wear proper civilian attire. Enjoy your Wash Day while maintaining school decorum!`,
            details: [
              { label: 'ðŸ‘• Dress Code', value: 'Proper civilian attire allowed' },
              { label: 'ðŸ†” Requirement', value: 'School ID is strictly required' },
              { label: 'ðŸ‘— Guidelines', value: 'Dress modestly and appropriately' }
            ]
          };
          break;
          
        case 4: // Thursday
          reminder = {
            icon: 'ðŸ’ª',
            title: 'Thursday - Keep Going Strong',
            content: `${timeGreeting.greeting}, students! We're almost at the weekend - stay focused and motivated! Have a productive Thursday!`,
            details: [
              { label: 'ðŸ‘” Dress Code', value: 'Complete school uniform' },
              { label: 'ðŸ†” Requirement', value: 'School ID is strictly required' },
              { label: 'ðŸ“š Motivation', value: 'Stay focused on your goals' }
            ]
          };
          break;
          
        case 5: // Friday
          const currentHour = now.getHours();
          const fridayRainfall = weather.rainfallIntensity || 0;
          
          if (currentHour >= 14) { // Show after 2 PM - Flag retreat info
            if (fridayRainfall >= 7.5) {
              // Heavy rain - ceremony cancelled
              reminder = {
                icon: 'ðŸŒ§ï¸',
                title: 'No Flag Retreat Today',
                content: `Attention, students! Due to heavy rainfall, there will be <strong>NO Flag Retreat</strong> at 4:00 PM today. Stay safe and have a great weekend!`,
                details: [
                  { label: 'ðŸŒ§ï¸ Weather', value: `Heavy rain (${fridayRainfall.toFixed(1)}mm/h)` },
                  { label: 'ðŸ‘” Dress Code', value: 'Complete school uniform' },
                  { label: 'â˜‚ï¸ Safety', value: 'Proceed home safely with umbrella' }
                ]
              };
            } else if (fridayRainfall >= 0.5) {
              // Light rain - ceremony may be cancelled
              reminder = {
                icon: 'ðŸ‡µðŸ‡­',
                title: 'Flag Retreat May Be Cancelled',
                content: `Attention, students! Due to light rain, the <strong>Flag Retreat may be cancelled</strong>. Please wait for announcements at 4:00 PM.`,
                details: [
                  { label: 'ðŸŒ¦ï¸ Weather', value: `Light rain (${fridayRainfall.toFixed(1)}mm/h)` },
                  { label: 'â° Time', value: '4:00 PM - Check for updates' },
                  { label: 'ðŸ‘” Dress Code', value: 'Complete school uniform' },
                  { label: 'â˜‚ï¸ Reminder', value: 'Bring umbrella just in case' }
                ]
              };
            } else {
              // Good weather - ceremony will proceed
              reminder = {
                icon: 'ðŸ‡µðŸ‡­',
                title: 'Flag Retreat at 4:00 PM',
                content: `Attention, students! There will be a <strong>Flag Retreat</strong> ceremony this afternoon. Let's end the week with honor and respect for our flag!`,
                details: [
                  { label: 'â° Time', value: '4:00 PM sharp' },
                  { label: weather.isSunny ? 'â˜€ï¸ Weather' : 'â˜ï¸ Weather', value: `${weather.condition || 'Good conditions'} - Will proceed` },
                  { label: 'ðŸ‘” Dress Code', value: 'Complete school uniform' },
                  { label: 'ðŸ™ Reminder', value: 'Show respect during ceremony' }
                ]
              };
            }
          } else { // Morning - Regular Friday reminder
            reminder = {
              icon: 'ðŸŽ‰',
              title: 'Happy Friday!',
              content: `${timeGreeting.greeting}, students! It's the last day of the school week - finish strong! Have a wonderful Friday!`,
              details: [
                { label: 'ðŸ‘” Dress Code', value: 'Complete school uniform' },
                { label: 'ðŸ†” Requirement', value: 'School ID is strictly required' },
                { label: 'âœ¨ Motivation', value: 'End the week on a high note' },
                { label: 'ðŸ‡µðŸ‡­ Later Today', value: 'Flag Retreat at 4:00 PM (weather permitting)' }
              ]
            };
          }
          break;
          
        case 0: // Sunday
        case 6: // Saturday
          reminder = {
            icon: 'ðŸ–ï¸',
            title: `Happy ${getDayName(dayOfWeek)}!`,
            content: `Enjoy your weekend and take time to rest and recharge! See you on Monday for another great week at BSHS!`,
            details: [
              { label: 'ðŸ–ï¸ Weekend', value: 'No classes today' },
              { label: 'ðŸ“š Suggestion', value: 'Review lessons for next week' },
              { label: 'ðŸ˜Š Reminder', value: 'Rest well and stay healthy' }
            ]
          };
          break;
        }
      }
      
      // Create HTML for reminder
      if (reminder) {
        // Generate details HTML if details exist
        let detailsHTML = '';
        if (reminder.details && reminder.details.length > 0) {
          detailsHTML = '<div class="reminder-details">';
          reminder.details.forEach(detail => {
            detailsHTML += `
              <div class="reminder-detail-item">
                <strong>${detail.label}</strong>
                ${detail.value}
              </div>
            `;
          });
          detailsHTML += '</div>';
        }
        
        const reminderHTML = `
          <div class="reminder-card">
            <div class="reminder-header">
              <div class="reminder-icon">${reminder.icon}</div>
              <div class="reminder-header-text">
                <h3>${reminder.title}</h3>
                <span class="reminder-date-badge">ðŸ“… ${getDayName(dayOfWeek)}, ${formatDate(now)}</span>
              </div>
            </div>
            <div class="reminder-content">
              <p>${reminder.content}</p>
            </div>
            ${detailsHTML}
          </div>
        `;
        
        // Use innerHTML directly since all content is generated internally (no user input)
        container.innerHTML = reminderHTML;
      }
    }
    
    // Initialize on page load
    async function initializeAll() {
      await generateDailyReminder();
      await updateWeatherInfo(); // Ensure weather updates with daily reminders
    }
    
    initializeAll();
    
    // Re-check and update every hour (3600000 ms = 1 hour)
    setInterval(initializeAll, 3600000);
    
    // Also refresh at midnight to get new day's reminder
    function scheduleNextMidnightRefresh() {
      const now = new Date();
      const tomorrow = new Date(now);
      tomorrow.setDate(tomorrow.getDate() + 1);
      tomorrow.setHours(0, 0, 1, 0); // 00:00:01 next day
      
      const timeUntilMidnight = tomorrow - now;
      
      setTimeout(() => {
        initializeAll();
        scheduleNextMidnightRefresh(); // Schedule next midnight refresh
      }, timeUntilMidnight);
    }
    
    scheduleNextMidnightRefresh();
    
    // Optional: Check every minute for more frequent updates
    // Uncomment the line below if you want announcements to disappear within a minute of expiring
    // setInterval(initializeAnnouncementSwiper, 60000);

    // Carousel functionality
    // Hide expired events
    function hideExpiredEvents() {
      const today = new Date();
      today.setHours(0, 0, 0, 0); // Reset to start of day for comparison
      
      document.querySelectorAll('.event-card[data-expiry]').forEach(card => {
        const expiryDate = new Date(card.getAttribute('data-expiry'));
        expiryDate.setHours(23, 59, 59, 999); // End of expiry day
        
        if (today > expiryDate) {
          card.style.display = 'none';
          card.classList.remove('active');
        }
      });
    }
    
    // Run on page load
    hideExpiredEvents();
    
    let currentSlide = 0;
    const slides = document.querySelectorAll('.event-card:not([style*="display: none"])');
    const indicatorsContainer = document.querySelector('.carousel-indicators');
    let totalSlides = slides.length;
    
    // Update indicators based on visible slides
    if (indicatorsContainer && totalSlides > 0) {
      indicatorsContainer.innerHTML = '';
      for (let i = 0; i < totalSlides; i++) {
        const indicator = document.createElement('span');
        indicator.className = i === 0 ? 'indicator active' : 'indicator';
        indicator.onclick = () => goToSlide(i);
        indicatorsContainer.appendChild(indicator);
      }
    }
    
    const indicators = document.querySelectorAll('.indicator');

    function showSlide(index) {
      // Remove active class from all slides and indicators
      slides.forEach(slide => slide.classList.remove('active'));
      indicators.forEach(indicator => indicator.classList.remove('active'));
      
      // Add active class to current slide and indicator
      if (slides[index]) {
        slides[index].classList.add('active');
      }
      if (indicators[index]) {
        indicators[index].classList.add('active');
      }
    }

    function moveCarousel(direction) {
      if (totalSlides <= 1) return; // Don't move if only one or no slides
      
      currentSlide += direction;
      
      // Loop around
      if (currentSlide >= totalSlides) {
        currentSlide = 0;
      } else if (currentSlide < 0) {
        currentSlide = totalSlides - 1;
      }
      
      showSlide(currentSlide);
    }

    function goToSlide(index) {
      if (totalSlides <= 1) return; // Don't move if only one or no slides
      currentSlide = index;
      showSlide(currentSlide);
    }

    // Auto-advance carousel every 5 seconds (only if multiple slides)
    if (totalSlides > 1) {
      setInterval(() => {
        moveCarousel(1);
      }, 5000);
    }
    
    // Hide carousel buttons if only one slide
    if (totalSlides <= 1) {
      const carouselButtons = document.querySelectorAll('.carousel-btn');
      carouselButtons.forEach(btn => btn.style.display = 'none');
    }

    // ============================================
    // ICT CLUB - SCHOOL ID MANAGEMENT
    // ============================================
    // TO ADD STUDENT IDs: Simply add student numbers to the array below
    // Example: '2025-001234', '2024-005678', etc.
    
    const readyForReleaseIDs = [
      // Add student IDs here - one per line
      // Example format:
      '122609130043',
      '122607130016',
      '122606130023',
      '122606130061',
      '122606130018',
      '122606130064',
    ];

    // Function to display student IDs
    function displayStudentIDs() {
      const idItemsContainer = document.getElementById('idItems');
      
      if (!idItemsContainer) return;
      
      // Clear existing content
      idItemsContainer.innerHTML = '';
      
      if (readyForReleaseIDs.length === 0) {
        // Show "no IDs" message
        idItemsContainer.innerHTML = `
          <div class="no-ids-message">
            <span class="no-ids-icon">ðŸ“­</span>
            <p>No IDs ready for release at the moment.</p>
            <p class="check-back">Check back later for updates!</p>
          </div>
        `;
      } else {
        // Display all student IDs
        readyForReleaseIDs.forEach(studentId => {
          const idItem = document.createElement('div');
          idItem.className = 'id-item';
          idItem.innerHTML = `
            <span class="id-number">${studentId}</span>
            <span class="id-status">âœ“ Ready</span>
          `;
          idItemsContainer.appendChild(idItem);
        });
      }
    }

    // Initialize the student ID list on page load
    displayStudentIDs();
  </script>
  
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</body>
</html>
